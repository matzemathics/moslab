-- vi:ft=lua

local L4 = require("L4");

local ld = L4.default_loader;
local kb_vbus = ld:new_channel();

ld:start(
    { caps = { gui = kb_vbus:svr(),
               icu = L4.Env.icu,
               sigma0 = L4.cast(L4.Proto.Factory, L4.Env.sigma0):create(L4.Proto.Sigma0) },
      log = { "IO", "yellow" } },
    "rom/io -vvvv rom/x86-legacy.devs rom/x86-fb.io"
);

ld:start(
    { caps = { vbus = kb_vbus, icu = L4.Env.icu },
      log = { "KB", "blue" } },
    "rom/keyboard"
);

