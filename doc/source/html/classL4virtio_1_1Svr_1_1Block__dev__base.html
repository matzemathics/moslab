<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>L4Re Operating System Framework – Interface and Usage Documentation: L4virtio::Svr::Block_dev_base&lt; Ds_data &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="l4re.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">L4Re Operating System Framework – Interface and Usage Documentation
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classL4virtio_1_1Svr_1_1Block__dev__base.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a>  </div>
  <div class="headertitle"><div class="title">L4virtio::Svr::Block_dev_base&lt; Ds_data &gt; Class Template Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div></div>
</div><!--header-->
<div class="contents">

<p>Base class for virtio block devices.  
 <a href="classL4virtio_1_1Svr_1_1Block__dev__base.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="server_2virtio-block_source.html">virtio-block</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Inheritance diagram for L4virtio::Svr::Block_dev_base&lt; Ds_data &gt;:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Svr_1_1Block__dev__base__inherit__graph.svg" width="202" height="1142"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Collaboration diagram for L4virtio::Svr::Block_dev_base&lt; Ds_data &gt;:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Svr_1_1Block__dev__base__coll__graph.svg" width="403" height="1444"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a71594b4dbd7adcf9772e48dac00a98c7" id="r_a71594b4dbd7adcf9772e48dac00a98c7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Block__dev__base.html#a71594b4dbd7adcf9772e48dac00a98c7">Block_dev_base</a> (<a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a> vendor, unsigned queue_size, <a class="el" href="group__l4__basic__types.html#gaf3331c485014bd12a9e4f9d27a55e689">l4_uint64_t</a> capacity, bool read_only)</td></tr>
<tr class="memdesc:a71594b4dbd7adcf9772e48dac00a98c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new virtio block device.  <br /></td></tr>
<tr class="separator:a71594b4dbd7adcf9772e48dac00a98c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ef8ce46edfefb6406f8c261a0b55d36" id="r_a0ef8ce46edfefb6406f8c261a0b55d36"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Block__dev__base.html#a0ef8ce46edfefb6406f8c261a0b55d36">process_request</a> (cxx::unique_ptr&lt; Request &gt; &amp;&amp;req)=0</td></tr>
<tr class="memdesc:a0ef8ce46edfefb6406f8c261a0b55d36"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implements the actual processing of data in the device.  <br /></td></tr>
<tr class="separator:a0ef8ce46edfefb6406f8c261a0b55d36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c458714db0fe38c496c97466768db5c" id="r_a9c458714db0fe38c496c97466768db5c"><td class="memItemLeft" align="right" valign="top"><a id="a9c458714db0fe38c496c97466768db5c" name="a9c458714db0fe38c496c97466768db5c"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>reset_device</b> ()=0</td></tr>
<tr class="memdesc:a9c458714db0fe38c496c97466768db5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset the actual hardware device. <br /></td></tr>
<tr class="separator:a9c458714db0fe38c496c97466768db5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e911bba0fa756a1c2eb014dc0bd6b0a" id="r_a3e911bba0fa756a1c2eb014dc0bd6b0a"><td class="memItemLeft" align="right" valign="top"><a id="a3e911bba0fa756a1c2eb014dc0bd6b0a" name="a3e911bba0fa756a1c2eb014dc0bd6b0a"></a>
virtual bool&#160;</td><td class="memItemRight" valign="bottom"><b>queue_stopped</b> ()=0</td></tr>
<tr class="memdesc:a3e911bba0fa756a1c2eb014dc0bd6b0a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return true, if the queues should not be processed further. <br /></td></tr>
<tr class="separator:a3e911bba0fa756a1c2eb014dc0bd6b0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd81130f9e38af771d43aabafa05e043" id="r_afd81130f9e38af771d43aabafa05e043"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Block__dev__base.html#afd81130f9e38af771d43aabafa05e043">finalize_request</a> (cxx::unique_ptr&lt; Request &gt; req, unsigned sz, <a class="el" href="group__l4__basic__types.html#ga9678dc2e6bf3e4d8ec950162576b0fad">l4_uint8_t</a> status=<a class="el" href="group__l4virtio__block.html#ggafefb8205febb8b89e612e86f0c89eaa9a52c6169e59039d478b7f4a9faec15f33">L4VIRTIO_BLOCK_S_OK</a>)</td></tr>
<tr class="memdesc:afd81130f9e38af771d43aabafa05e043"><td class="mdescLeft">&#160;</td><td class="mdescRight">Releases resources related to a request and notifies the client.  <br /></td></tr>
<tr class="separator:afd81130f9e38af771d43aabafa05e043"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdae77ce3367dbe19f52c1ce8a708a2b" id="r_afdae77ce3367dbe19f52c1ce8a708a2b"><td class="memItemLeft" align="right" valign="top"><a id="afdae77ce3367dbe19f52c1ce8a708a2b" name="afdae77ce3367dbe19f52c1ce8a708a2b"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>reconfig_queue</b> (unsigned idx) override</td></tr>
<tr class="memdesc:afdae77ce3367dbe19f52c1ce8a708a2b"><td class="mdescLeft">&#160;</td><td class="mdescRight">callback for client queue-config request <br /></td></tr>
<tr class="separator:afdae77ce3367dbe19f52c1ce8a708a2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abccf7d85ecfd3e21953761bedf52ad79" id="r_abccf7d85ecfd3e21953761bedf52ad79"><td class="memItemLeft" align="right" valign="top"><a id="abccf7d85ecfd3e21953761bedf52ad79" name="abccf7d85ecfd3e21953761bedf52ad79"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>reset</b> () override</td></tr>
<tr class="memdesc:abccf7d85ecfd3e21953761bedf52ad79"><td class="mdescLeft">&#160;</td><td class="mdescRight">reset callback, called for doing a device reset <br /></td></tr>
<tr class="separator:abccf7d85ecfd3e21953761bedf52ad79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classL4virtio_1_1Svr_1_1Device__t')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classL4virtio_1_1Svr_1_1Device__t.html">L4virtio::Svr::Device_t&lt; Ds_data &gt;</a></td></tr>
<tr class="memitem:a858188800d304a06069db6c04020fc47 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t" id="r_a858188800d304a06069db6c04020fc47"><td class="memItemLeft" align="right" valign="top">
virtual bool&#160;</td><td class="memItemRight" valign="bottom"><b>check_features</b> ()</td></tr>
<tr class="memdesc:a858188800d304a06069db6c04020fc47 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">callback for checking the subset of accepted features <br /></td></tr>
<tr class="separator:a858188800d304a06069db6c04020fc47 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae684a9e7816579ca93e4f3bf6c765999 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t" id="r_ae684a9e7816579ca93e4f3bf6c765999"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classL4_1_1Cap.html">L4::Cap</a>&lt; <a class="el" href="classL4_1_1Irq.html">L4::Irq</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Device__t.html#ae684a9e7816579ca93e4f3bf6c765999">device_notify_irq</a> (unsigned idx)</td></tr>
<tr class="memdesc:ae684a9e7816579ca93e4f3bf6c765999 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback to gather the device notification IRQ (multi IRQ).  <br /></td></tr>
<tr class="separator:ae684a9e7816579ca93e4f3bf6c765999 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66d09e200e34ccad61e5843d2b5bb0a0 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t" id="r_a66d09e200e34ccad61e5843d2b5bb0a0"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Device__t.html#a66d09e200e34ccad61e5843d2b5bb0a0">register_driver_irq</a> (unsigned idx)</td></tr>
<tr class="memdesc:a66d09e200e34ccad61e5843d2b5bb0a0 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback for registering an notification IRQ (multi IRQ).  <br /></td></tr>
<tr class="separator:a66d09e200e34ccad61e5843d2b5bb0a0 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9536bf0c6e00b566c78c6abe80a68780 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t" id="r_a9536bf0c6e00b566c78c6abe80a68780"><td class="memItemLeft" align="right" valign="top">
virtual unsigned&#160;</td><td class="memItemRight" valign="bottom"><b>num_events_supported</b> () const</td></tr>
<tr class="memdesc:a9536bf0c6e00b566c78c6abe80a68780 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the highest notification index supported. <br /></td></tr>
<tr class="separator:a9536bf0c6e00b566c78c6abe80a68780 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ce755ee0579fb70926d762ba67bb66f inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t" id="r_a7ce755ee0579fb70926d762ba67bb66f"><td class="memItemLeft" align="right" valign="top">
&#160;</td><td class="memItemRight" valign="bottom"><b>Device_t</b> (<a class="el" href="classL4virtio_1_1Svr_1_1Dev__config.html">Dev_config</a> *dev_config)</td></tr>
<tr class="memdesc:a7ce755ee0579fb70926d762ba67bb66f inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make a device for the given config. <br /></td></tr>
<tr class="separator:a7ce755ee0579fb70926d762ba67bb66f inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac35c61db0aec9e96ee18170bf5bb17b4 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t" id="r_ac35c61db0aec9e96ee18170bf5bb17b4"><td class="memItemLeft" align="right" valign="top">
<a class="el" href="classL4virtio_1_1Svr_1_1Driver__mem__list__t.html">Mem_list</a> const *&#160;</td><td class="memItemRight" valign="bottom"><b>mem_info</b> () const</td></tr>
<tr class="memdesc:ac35c61db0aec9e96ee18170bf5bb17b4 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the memory region list used for this device. <br /></td></tr>
<tr class="separator:ac35c61db0aec9e96ee18170bf5bb17b4 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedbe988112e98750e5409a8c92358dcf inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t" id="r_aedbe988112e98750e5409a8c92358dcf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Device__t.html#aedbe988112e98750e5409a8c92358dcf">reset_queue_config</a> (unsigned idx, unsigned num_max, bool inc_generation=false)</td></tr>
<tr class="memdesc:aedbe988112e98750e5409a8c92358dcf inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Trigger reset for the configuration space for queue <em>idx</em>.  <br /></td></tr>
<tr class="separator:aedbe988112e98750e5409a8c92358dcf inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac13ae09cfc41fad98bd25c2d76bfac63 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t" id="r_ac13ae09cfc41fad98bd25c2d76bfac63"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Device__t.html#ac13ae09cfc41fad98bd25c2d76bfac63">init_mem_info</a> (unsigned num)</td></tr>
<tr class="memdesc:ac13ae09cfc41fad98bd25c2d76bfac63 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the memory region list to the given maximum.  <br /></td></tr>
<tr class="separator:ac13ae09cfc41fad98bd25c2d76bfac63 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29f780ecb04509d8b72f4a155b073c74 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t" id="r_a29f780ecb04509d8b72f4a155b073c74"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Device__t.html#a29f780ecb04509d8b72f4a155b073c74">device_error</a> ()</td></tr>
<tr class="memdesc:a29f780ecb04509d8b72f4a155b073c74 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transition device into DEVICE_NEEDS_RESET state.  <br /></td></tr>
<tr class="separator:a29f780ecb04509d8b72f4a155b073c74 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab906b4cc61026fd815a8056f07bef10e inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t" id="r_ab906b4cc61026fd815a8056f07bef10e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Device__t.html#ab906b4cc61026fd815a8056f07bef10e">setup_queue</a> (<a class="el" href="classL4virtio_1_1Svr_1_1Virtqueue.html">Virtqueue</a> *q, unsigned qn, unsigned num_max)</td></tr>
<tr class="memdesc:ab906b4cc61026fd815a8056f07bef10e inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable/disable the specified queue.  <br /></td></tr>
<tr class="separator:ab906b4cc61026fd815a8056f07bef10e inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a460f5dc2b32e33a616eb822ffd2f88f0 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t" id="r_a460f5dc2b32e33a616eb822ffd2f88f0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Device__t.html#a460f5dc2b32e33a616eb822ffd2f88f0">handle_mem_cmd_write</a> ()</td></tr>
<tr class="memdesc:a460f5dc2b32e33a616eb822ffd2f88f0 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check for a value in the <code>cmd</code> register and handle a write.  <br /></td></tr>
<tr class="separator:a460f5dc2b32e33a616eb822ffd2f88f0 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade1572aa45b90682de1e05f08590d7e3 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t" id="r_ade1572aa45b90682de1e05f08590d7e3"><td class="memItemLeft" align="right" valign="top">
void&#160;</td><td class="memItemRight" valign="bottom"><b>enable_trusted_ds_validation</b> ()</td></tr>
<tr class="memdesc:ade1572aa45b90682de1e05f08590d7e3 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable trusted dataspace validation. <br /></td></tr>
<tr class="separator:ade1572aa45b90682de1e05f08590d7e3 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38406c5353e2f96de8c667a6d5c5f5f1 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t" id="r_a38406c5353e2f96de8c667a6d5c5f5f1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Device__t.html#a38406c5353e2f96de8c667a6d5c5f5f1">add_trusted_dataspaces</a> (std::shared_ptr&lt; Ds_vector const &gt; ds)</td></tr>
<tr class="memdesc:a38406c5353e2f96de8c667a6d5c5f5f1 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Provide a list of trusted dataspaces that can be used for validation.  <br /></td></tr>
<tr class="separator:a38406c5353e2f96de8c667a6d5c5f5f1 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a8595fd3bf302a2f187ff512b50512f8d" id="r_a8595fd3bf302a2f187ff512b50512f8d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Block__dev__base.html#a8595fd3bf302a2f187ff512b50512f8d">set_size_max</a> (<a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a> sz)</td></tr>
<tr class="memdesc:a8595fd3bf302a2f187ff512b50512f8d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the maximum size of any single segment reported to client.  <br /></td></tr>
<tr class="separator:a8595fd3bf302a2f187ff512b50512f8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac54727ca73bfb46a2d22be44987c9cfc" id="r_ac54727ca73bfb46a2d22be44987c9cfc"><td class="memItemLeft" align="right" valign="top"><a id="ac54727ca73bfb46a2d22be44987c9cfc" name="ac54727ca73bfb46a2d22be44987c9cfc"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>set_seg_max</b> (<a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a> sz)</td></tr>
<tr class="memdesc:ac54727ca73bfb46a2d22be44987c9cfc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the maximum number of segments in a request that is reported to client. <br /></td></tr>
<tr class="separator:ac54727ca73bfb46a2d22be44987c9cfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfc73067f1ba512e3d60b3fe0f047e38" id="r_abfc73067f1ba512e3d60b3fe0f047e38"><td class="memItemLeft" align="right" valign="top"><a id="abfc73067f1ba512e3d60b3fe0f047e38" name="abfc73067f1ba512e3d60b3fe0f047e38"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>set_geometry</b> (<a class="el" href="group__l4__basic__types.html#gae8d67914f723bf843df6f311ad2619a2">l4_uint16_t</a> cylinders, <a class="el" href="group__l4__basic__types.html#ga9678dc2e6bf3e4d8ec950162576b0fad">l4_uint8_t</a> heads, <a class="el" href="group__l4__basic__types.html#ga9678dc2e6bf3e4d8ec950162576b0fad">l4_uint8_t</a> sectors)</td></tr>
<tr class="memdesc:abfc73067f1ba512e3d60b3fe0f047e38"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set disk geometry that is reported to the client. <br /></td></tr>
<tr class="separator:abfc73067f1ba512e3d60b3fe0f047e38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4836579882ae39b26ebcb72204ca5a01" id="r_a4836579882ae39b26ebcb72204ca5a01"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Block__dev__base.html#a4836579882ae39b26ebcb72204ca5a01">set_blk_size</a> (<a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a> sz)</td></tr>
<tr class="memdesc:a4836579882ae39b26ebcb72204ca5a01"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets block disk size to be reported to the client.  <br /></td></tr>
<tr class="separator:a4836579882ae39b26ebcb72204ca5a01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4e9c13e6c652cc6fe55b648a9881abc" id="r_ad4e9c13e6c652cc6fe55b648a9881abc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Block__dev__base.html#ad4e9c13e6c652cc6fe55b648a9881abc">set_topology</a> (<a class="el" href="group__l4__basic__types.html#ga9678dc2e6bf3e4d8ec950162576b0fad">l4_uint8_t</a> physical_block_exp, <a class="el" href="group__l4__basic__types.html#ga9678dc2e6bf3e4d8ec950162576b0fad">l4_uint8_t</a> alignment_offset, <a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a> min_io_size, <a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a> opt_io_size)</td></tr>
<tr class="memdesc:ad4e9c13e6c652cc6fe55b648a9881abc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the I/O alignment information reported back to the client.  <br /></td></tr>
<tr class="separator:ad4e9c13e6c652cc6fe55b648a9881abc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73469de4686eb71455b5edb3baf88622" id="r_a73469de4686eb71455b5edb3baf88622"><td class="memItemLeft" align="right" valign="top"><a id="a73469de4686eb71455b5edb3baf88622" name="a73469de4686eb71455b5edb3baf88622"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>set_flush</b> ()</td></tr>
<tr class="memdesc:a73469de4686eb71455b5edb3baf88622"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enables the flush command. <br /></td></tr>
<tr class="separator:a73469de4686eb71455b5edb3baf88622"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a523507cc71de8b4f7b549424e0e200fe" id="r_a523507cc71de8b4f7b549424e0e200fe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Block__dev__base.html#a523507cc71de8b4f7b549424e0e200fe">set_config_wce</a> (<a class="el" href="group__l4__basic__types.html#ga9678dc2e6bf3e4d8ec950162576b0fad">l4_uint8_t</a> writeback)</td></tr>
<tr class="memdesc:a523507cc71de8b4f7b549424e0e200fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets cache mode and enables the writeback toggle.  <br /></td></tr>
<tr class="separator:a523507cc71de8b4f7b549424e0e200fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41ce247545113631dc5a3bcac7a70abc" id="r_a41ce247545113631dc5a3bcac7a70abc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__l4__basic__types.html#ga9678dc2e6bf3e4d8ec950162576b0fad">l4_uint8_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Block__dev__base.html#a41ce247545113631dc5a3bcac7a70abc">get_writeback</a> ()</td></tr>
<tr class="memdesc:a41ce247545113631dc5a3bcac7a70abc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the writeback field from the configuration space.  <br /></td></tr>
<tr class="separator:a41ce247545113631dc5a3bcac7a70abc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1fd85e2fb0cc819c5739ecc1911882a" id="r_ab1fd85e2fb0cc819c5739ecc1911882a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Block__dev__base.html#ab1fd85e2fb0cc819c5739ecc1911882a">set_discard</a> (<a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a> max_discard_sectors, <a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a> max_discard_seg, <a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a> discard_sector_alignment)</td></tr>
<tr class="memdesc:ab1fd85e2fb0cc819c5739ecc1911882a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets constraints for and enables the discard command.  <br /></td></tr>
<tr class="separator:ab1fd85e2fb0cc819c5739ecc1911882a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29efdfb37c14cba25ea4f1c71cfe0cf1" id="r_a29efdfb37c14cba25ea4f1c71cfe0cf1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Block__dev__base.html#a29efdfb37c14cba25ea4f1c71cfe0cf1">set_write_zeroes</a> (<a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a> max_write_zeroes_sectors, <a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a> max_write_zeroes_seg, <a class="el" href="group__l4__basic__types.html#ga9678dc2e6bf3e4d8ec950162576b0fad">l4_uint8_t</a> write_zeroes_may_unmap)</td></tr>
<tr class="memdesc:a29efdfb37c14cba25ea4f1c71cfe0cf1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets constraints for and enables the write zeroes command.  <br /></td></tr>
<tr class="separator:a29efdfb37c14cba25ea4f1c71cfe0cf1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="inherited" name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_attribs_classL4virtio_1_1Svr_1_1Device__t"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classL4virtio_1_1Svr_1_1Device__t')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classL4virtio_1_1Svr_1_1Device__t.html">L4virtio::Svr::Device_t&lt; Ds_data &gt;</a></td></tr>
<tr class="memitem:a4ff8b5e4425d1b720b9751fbe501f68d inherit pro_attribs_classL4virtio_1_1Svr_1_1Device__t" id="r_a4ff8b5e4425d1b720b9751fbe501f68d"><td class="memItemLeft" align="right" valign="top">
<a class="el" href="classL4virtio_1_1Svr_1_1Driver__mem__list__t.html">Mem_list</a>&#160;</td><td class="memItemRight" valign="bottom"><b>_mem_info</b></td></tr>
<tr class="memdesc:a4ff8b5e4425d1b720b9751fbe501f68d inherit pro_attribs_classL4virtio_1_1Svr_1_1Device__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Memory region list. <br /></td></tr>
<tr class="separator:a4ff8b5e4425d1b720b9751fbe501f68d inherit pro_attribs_classL4virtio_1_1Svr_1_1Device__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><div class="compoundTemplParams">template&lt;typename Ds_data&gt;<br />
class L4virtio::Svr::Block_dev_base&lt; Ds_data &gt;</div><p>Base class for virtio block devices. </p>
<p>Use this class as a base to implement your own specific block device. </p>

<p class="definition">Definition at line <a class="el" href="server_2virtio-block_source.html#l00257">257</a> of file <a class="el" href="server_2virtio-block_source.html">virtio-block</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a71594b4dbd7adcf9772e48dac00a98c7" name="a71594b4dbd7adcf9772e48dac00a98c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71594b4dbd7adcf9772e48dac00a98c7">&#9670;&#160;</a></span>Block_dev_base()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Ds_data &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classL4virtio_1_1Svr_1_1Block__dev__base.html">L4virtio::Svr::Block_dev_base</a>&lt; Ds_data &gt;::Block_dev_base </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a>&#160;</td>
          <td class="paramname"><em>vendor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>queue_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#gaf3331c485014bd12a9e4f9d27a55e689">l4_uint64_t</a>&#160;</td>
          <td class="paramname"><em>capacity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>read_only</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a new virtio block device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">vendor</td><td>Vendor ID </td></tr>
    <tr><td class="paramname">queue_size</td><td>Number of entries to provide in avail and used queue. </td></tr>
    <tr><td class="paramname">capacity</td><td>Size of the device in 512-byte sectors. </td></tr>
    <tr><td class="paramname">read_only</td><td>True, if the device should not be writable. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="server_2virtio-block_source.html#l00462">462</a> of file <a class="el" href="server_2virtio-block_source.html">virtio-block</a>.</p>

<p class="reference">References <a class="el" href="server_2l4virtio_source.html#l00973">L4virtio::Svr::Device_t&lt; Ds_data &gt;::reset_queue_config()</a>.</p>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Svr_1_1Block__dev__base_a71594b4dbd7adcf9772e48dac00a98c7_cgraph.svg" width="422" height="66"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="afd81130f9e38af771d43aabafa05e043" name="afd81130f9e38af771d43aabafa05e043"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd81130f9e38af771d43aabafa05e043">&#9670;&#160;</a></span>finalize_request()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Ds_data &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classL4virtio_1_1Svr_1_1Block__dev__base.html">L4virtio::Svr::Block_dev_base</a>&lt; Ds_data &gt;::finalize_request </td>
          <td>(</td>
          <td class="paramtype">cxx::unique_ptr&lt; Request &gt;&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>sz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#ga9678dc2e6bf3e4d8ec950162576b0fad">l4_uint8_t</a>&#160;</td>
          <td class="paramname"><em>status</em> = <code><a class="el" href="group__l4virtio__block.html#ggafefb8205febb8b89e612e86f0c89eaa9a52c6169e59039d478b7f4a9faec15f33">L4VIRTIO_BLOCK_S_OK</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Releases resources related to a request and notifies the client. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">req</td><td>Pointer to request that has finished. </td></tr>
    <tr><td class="paramname">sz</td><td>Number of bytes consumed. </td></tr>
    <tr><td class="paramname">status</td><td>Status of request (see L4virtio_block_status).</td></tr>
  </table>
  </dd>
</dl>
<p>This function must be called when an asynchronous request finishes, either successfully or with an error. The status byte in the request must have been set prior to calling it. </p>

<p class="definition">Definition at line <a class="el" href="server_2virtio-block_source.html#l00515">515</a> of file <a class="el" href="server_2virtio-block_source.html">virtio-block</a>.</p>

<p class="reference">References <a class="el" href="server_2l4virtio_source.html#l00995">L4virtio::Svr::Device_t&lt; Ds_data &gt;::device_error()</a>, and <a class="el" href="virtqueue_source.html#l00412">L4virtio::Virtqueue::ready()</a>.</p>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Svr_1_1Block__dev__base_afd81130f9e38af771d43aabafa05e043_cgraph.svg" width="468" height="115"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a41ce247545113631dc5a3bcac7a70abc" name="a41ce247545113631dc5a3bcac7a70abc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41ce247545113631dc5a3bcac7a70abc">&#9670;&#160;</a></span>get_writeback()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Ds_data &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__l4__basic__types.html#ga9678dc2e6bf3e4d8ec950162576b0fad">l4_uint8_t</a> <a class="el" href="classL4virtio_1_1Svr_1_1Block__dev__base.html">L4virtio::Svr::Block_dev_base</a>&lt; Ds_data &gt;::get_writeback </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the writeback field from the configuration space. </p>
<dl class="section return"><dt>Returns</dt><dd>Value of the writeback field. </dd></dl>

<p class="definition">Definition at line <a class="el" href="server_2virtio-block_source.html#l00406">406</a> of file <a class="el" href="server_2virtio-block_source.html">virtio-block</a>.</p>

</div>
</div>
<a id="a0ef8ce46edfefb6406f8c261a0b55d36" name="a0ef8ce46edfefb6406f8c261a0b55d36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ef8ce46edfefb6406f8c261a0b55d36">&#9670;&#160;</a></span>process_request()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Ds_data &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool <a class="el" href="classL4virtio_1_1Svr_1_1Block__dev__base.html">L4virtio::Svr::Block_dev_base</a>&lt; Ds_data &gt;::process_request </td>
          <td>(</td>
          <td class="paramtype">cxx::unique_ptr&lt; Request &gt; &amp;&amp;&#160;</td>
          <td class="paramname"><em>req</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements the actual processing of data in the device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">req</td><td>The request to be processed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If false, no further requests will be scheduled.</dd></dl>
<p>Synchronous and asynchronous processing of the data is supported. For asynchronous mode, the function should set up the worker and then return false. In synchronous mode, the function should return true, once processing is complete. If there is an error and processing is aborted, the status flag of <code>req</code> needs to be set accordingly and the request immediately finished with finish_request() if the client is to be answered. </p>

</div>
</div>
<a id="a4836579882ae39b26ebcb72204ca5a01" name="a4836579882ae39b26ebcb72204ca5a01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4836579882ae39b26ebcb72204ca5a01">&#9670;&#160;</a></span>set_blk_size()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Ds_data &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classL4virtio_1_1Svr_1_1Block__dev__base.html">L4virtio::Svr::Block_dev_base</a>&lt; Ds_data &gt;::set_blk_size </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a>&#160;</td>
          <td class="paramname"><em>sz</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets block disk size to be reported to the client. </p>
<p>Setting this does not change the logical sector size used for addressing the device. </p>

<p class="definition">Definition at line <a class="el" href="server_2virtio-block_source.html#l00350">350</a> of file <a class="el" href="server_2virtio-block_source.html">virtio-block</a>.</p>

</div>
</div>
<a id="a523507cc71de8b4f7b549424e0e200fe" name="a523507cc71de8b4f7b549424e0e200fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a523507cc71de8b4f7b549424e0e200fe">&#9670;&#160;</a></span>set_config_wce()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Ds_data &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classL4virtio_1_1Svr_1_1Block__dev__base.html">L4virtio::Svr::Block_dev_base</a>&lt; Ds_data &gt;::set_config_wce </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#ga9678dc2e6bf3e4d8ec950162576b0fad">l4_uint8_t</a>&#160;</td>
          <td class="paramname"><em>writeback</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets cache mode and enables the writeback toggle. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">writeback</td><td>Mode of the cache (0 for writethrough, 1 for writeback). </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="server_2virtio-block_source.html#l00393">393</a> of file <a class="el" href="server_2virtio-block_source.html">virtio-block</a>.</p>

</div>
</div>
<a id="ab1fd85e2fb0cc819c5739ecc1911882a" name="ab1fd85e2fb0cc819c5739ecc1911882a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1fd85e2fb0cc819c5739ecc1911882a">&#9670;&#160;</a></span>set_discard()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Ds_data &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classL4virtio_1_1Svr_1_1Block__dev__base.html">L4virtio::Svr::Block_dev_base</a>&lt; Ds_data &gt;::set_discard </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a>&#160;</td>
          <td class="paramname"><em>max_discard_sectors</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a>&#160;</td>
          <td class="paramname"><em>max_discard_seg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a>&#160;</td>
          <td class="paramname"><em>discard_sector_alignment</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets constraints for and enables the discard command. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">max_discard_sectors</td><td>Maximum discard sectors size. </td></tr>
    <tr><td class="paramname">max_discard_seg</td><td>Maximum discard segment number. </td></tr>
    <tr><td class="paramname">discard_sector_alignment</td><td>Can be used by the driver when splitting a request based on alignment. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="server_2virtio-block_source.html#l00420">420</a> of file <a class="el" href="server_2virtio-block_source.html">virtio-block</a>.</p>

</div>
</div>
<a id="a8595fd3bf302a2f187ff512b50512f8d" name="a8595fd3bf302a2f187ff512b50512f8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8595fd3bf302a2f187ff512b50512f8d">&#9670;&#160;</a></span>set_size_max()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Ds_data &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classL4virtio_1_1Svr_1_1Block__dev__base.html">L4virtio::Svr::Block_dev_base</a>&lt; Ds_data &gt;::set_size_max </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a>&#160;</td>
          <td class="paramname"><em>sz</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets the maximum size of any single segment reported to client. </p>
<p>The limit is also applied to any incoming requests. Requests with larger segments result in an IO error being reported to the client. That means that <a class="el" href="classL4virtio_1_1Svr_1_1Block__dev__base.html#a0ef8ce46edfefb6406f8c261a0b55d36" title="Implements the actual processing of data in the device.">process_request()</a> can safely make the assumption that all segments in the received request are smaller. </p>

<p class="definition">Definition at line <a class="el" href="server_2virtio-block_source.html#l00308">308</a> of file <a class="el" href="server_2virtio-block_source.html">virtio-block</a>.</p>

</div>
</div>
<a id="ad4e9c13e6c652cc6fe55b648a9881abc" name="ad4e9c13e6c652cc6fe55b648a9881abc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4e9c13e6c652cc6fe55b648a9881abc">&#9670;&#160;</a></span>set_topology()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Ds_data &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classL4virtio_1_1Svr_1_1Block__dev__base.html">L4virtio::Svr::Block_dev_base</a>&lt; Ds_data &gt;::set_topology </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#ga9678dc2e6bf3e4d8ec950162576b0fad">l4_uint8_t</a>&#160;</td>
          <td class="paramname"><em>physical_block_exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#ga9678dc2e6bf3e4d8ec950162576b0fad">l4_uint8_t</a>&#160;</td>
          <td class="paramname"><em>alignment_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a>&#160;</td>
          <td class="paramname"><em>min_io_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a>&#160;</td>
          <td class="paramname"><em>opt_io_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets the I/O alignment information reported back to the client. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">physical_block_exp</td><td>Number of logical blocks per physical block(log2) </td></tr>
    <tr><td class="paramname">alignment_offset</td><td>Offset of the first aligned logical block </td></tr>
    <tr><td class="paramname">min_io_size</td><td>Suggested minimum I/O size in blocks </td></tr>
    <tr><td class="paramname">opt_io_size</td><td>Optimal I/O size in blocks </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="server_2virtio-block_source.html#l00366">366</a> of file <a class="el" href="server_2virtio-block_source.html">virtio-block</a>.</p>

</div>
</div>
<a id="a29efdfb37c14cba25ea4f1c71cfe0cf1" name="a29efdfb37c14cba25ea4f1c71cfe0cf1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29efdfb37c14cba25ea4f1c71cfe0cf1">&#9670;&#160;</a></span>set_write_zeroes()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Ds_data &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classL4virtio_1_1Svr_1_1Block__dev__base.html">L4virtio::Svr::Block_dev_base</a>&lt; Ds_data &gt;::set_write_zeroes </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a>&#160;</td>
          <td class="paramname"><em>max_write_zeroes_sectors</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a>&#160;</td>
          <td class="paramname"><em>max_write_zeroes_seg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#ga9678dc2e6bf3e4d8ec950162576b0fad">l4_uint8_t</a>&#160;</td>
          <td class="paramname"><em>write_zeroes_may_unmap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets constraints for and enables the write zeroes command. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">max_write_zeroes_sectors</td><td>Maximum write zeroes sectors size. </td></tr>
    <tr><td class="paramname">max_write_zeroes_seg</td><td>maximum write zeroes segment number. </td></tr>
    <tr><td class="paramname">write_zeroes_may_unmap</td><td>Set if a write zeroes request can result in deallocating one or more sectors. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="server_2virtio-block_source.html#l00440">440</a> of file <a class="el" href="server_2virtio-block_source.html">virtio-block</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>l4/l4virtio/server/<a class="el" href="server_2virtio-block_source.html">virtio-block</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceL4virtio.html">L4virtio</a></li><li class="navelem"><b>Svr</b></li><li class="navelem"><a class="el" href="classL4virtio_1_1Svr_1_1Block__dev__base.html">Block_dev_base</a></li>
    <li class="footer">Generated on Tue Oct 17 2023 00:25:30 for L4Re Operating System Framework – Interface and Usage Documentation by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
