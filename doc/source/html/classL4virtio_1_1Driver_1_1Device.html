<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>L4Re Operating System Framework: L4virtio::Driver::Device Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="l4re-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="L4Re_rgb_logo_quer_hg_h55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">L4Re Operating System Framework
   </div>
   <div id="projectbrief">Interface and Usage Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classL4virtio_1_1Driver_1_1Device.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle"><div class="title">L4virtio::Driver::Device Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Client-side implementation for a general virtio device.  
 <a href="classL4virtio_1_1Driver_1_1Device.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="client_2l4virtio_source.html">l4virtio</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Inheritance diagram for L4virtio::Driver::Device:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Driver_1_1Device__inherit__graph.svg" width="363" height="584"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Collaboration diagram for L4virtio::Driver::Device:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Driver_1_1Device__coll__graph.svg" width="535" height="1471"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a4f8b3d73188c3b6664755b81b80e441c" id="r_a4f8b3d73188c3b6664755b81b80e441c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Driver_1_1Device.html#a4f8b3d73188c3b6664755b81b80e441c">driver_connect</a> (<a class="el" href="classL4_1_1Cap.html">L4::Cap</a>&lt; <a class="el" href="classL4virtio_1_1Device.html">L4virtio::Device</a> &gt; srvcap, bool manage_notify=true)</td></tr>
<tr class="memdesc:a4f8b3d73188c3b6664755b81b80e441c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Contacts the device and starts the initial handshake.  <br /></td></tr>
<tr class="separator:a4f8b3d73188c3b6664755b81b80e441c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c9b791b723e7e8ad2eae927094b487d" id="r_a1c9b791b723e7e8ad2eae927094b487d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Driver_1_1Device.html#a1c9b791b723e7e8ad2eae927094b487d">bind_notification_irq</a> (unsigned index, <a class="el" href="classL4_1_1Cap.html">L4::Cap</a>&lt; <a class="el" href="structL4_1_1Triggerable.html">L4::Triggerable</a> &gt; irq) const</td></tr>
<tr class="memdesc:a1c9b791b723e7e8ad2eae927094b487d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a triggerable to receive notifications from the device.  <br /></td></tr>
<tr class="separator:a1c9b791b723e7e8ad2eae927094b487d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77b6e19eee76b71efd0065e62f71190d" id="r_a77b6e19eee76b71efd0065e62f71190d"><td class="memItemLeft" align="right" valign="top"><a id="a77b6e19eee76b71efd0065e62f71190d" name="a77b6e19eee76b71efd0065e62f71190d"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>fail_state</b> () const</td></tr>
<tr class="memdesc:a77b6e19eee76b71efd0065e62f71190d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return true if the device is in a fail state. <br /></td></tr>
<tr class="separator:a77b6e19eee76b71efd0065e62f71190d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adcbab39e15c2541a34fcd431b4a67d47" id="r_adcbab39e15c2541a34fcd431b4a67d47"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Driver_1_1Device.html#adcbab39e15c2541a34fcd431b4a67d47">feature_negotiated</a> (unsigned int feat) const</td></tr>
<tr class="memdesc:adcbab39e15c2541a34fcd431b4a67d47"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if a particular feature bit was negotiated with the device.  <br /></td></tr>
<tr class="separator:adcbab39e15c2541a34fcd431b4a67d47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af06d27e63124749456ddc8d959231741" id="r_af06d27e63124749456ddc8d959231741"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Driver_1_1Device.html#af06d27e63124749456ddc8d959231741">driver_acknowledge</a> ()</td></tr>
<tr class="memdesc:af06d27e63124749456ddc8d959231741"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finalize handshake with the device.  <br /></td></tr>
<tr class="separator:af06d27e63124749456ddc8d959231741"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a5c440b8353e0bd030a552334e7e5a3" id="r_a7a5c440b8353e0bd030a552334e7e5a3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Driver_1_1Device.html#a7a5c440b8353e0bd030a552334e7e5a3">register_ds</a> (<a class="el" href="classL4_1_1Cap.html">L4::Cap</a>&lt; <a class="el" href="classL4Re_1_1Dataspace.html">L4Re::Dataspace</a> &gt; ds, <a class="el" href="group__l4__basic__types.html#ga1c2c4b333f75b1d05b59855910f2b9cb">l4_umword_t</a> offset, <a class="el" href="group__l4__basic__types.html#ga1c2c4b333f75b1d05b59855910f2b9cb">l4_umword_t</a> size, <a class="el" href="group__l4__basic__types.html#gaf3331c485014bd12a9e4f9d27a55e689">l4_uint64_t</a> *devaddr)</td></tr>
<tr class="memdesc:a7a5c440b8353e0bd030a552334e7e5a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Share a dataspace with the device.  <br /></td></tr>
<tr class="separator:a7a5c440b8353e0bd030a552334e7e5a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa557ba0e56fbfc194b07440ecc796061" id="r_aa557ba0e56fbfc194b07440ecc796061"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Driver_1_1Device.html#aa557ba0e56fbfc194b07440ecc796061">config_queue</a> (int num, unsigned size, <a class="el" href="group__l4__basic__types.html#gaf3331c485014bd12a9e4f9d27a55e689">l4_uint64_t</a> desc_addr, <a class="el" href="group__l4__basic__types.html#gaf3331c485014bd12a9e4f9d27a55e689">l4_uint64_t</a> avail_addr, <a class="el" href="group__l4__basic__types.html#gaf3331c485014bd12a9e4f9d27a55e689">l4_uint64_t</a> used_addr)</td></tr>
<tr class="memdesc:aa557ba0e56fbfc194b07440ecc796061"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send the virtqueue configuration to the device.  <br /></td></tr>
<tr class="separator:aa557ba0e56fbfc194b07440ecc796061"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07dd8cdbc1ce12dca8af6a540463ae23" id="r_a07dd8cdbc1ce12dca8af6a540463ae23"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Driver_1_1Device.html#a07dd8cdbc1ce12dca8af6a540463ae23">max_queue_size</a> (int num) const</td></tr>
<tr class="memdesc:a07dd8cdbc1ce12dca8af6a540463ae23"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum queue size allowed by the device.  <br /></td></tr>
<tr class="separator:a07dd8cdbc1ce12dca8af6a540463ae23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4aa9ac34ce928b9d437f1bb6a2ec216" id="r_af4aa9ac34ce928b9d437f1bb6a2ec216"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Driver_1_1Device.html#af4aa9ac34ce928b9d437f1bb6a2ec216">send_and_wait</a> (<a class="el" href="classL4virtio_1_1Driver_1_1Virtqueue.html">Virtqueue</a> &amp;queue, <a class="el" href="group__l4__basic__types.html#gae8d67914f723bf843df6f311ad2619a2">l4_uint16_t</a> descno)</td></tr>
<tr class="memdesc:af4aa9ac34ce928b9d437f1bb6a2ec216"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a request to the device and wait for it to be processed.  <br /></td></tr>
<tr class="separator:af4aa9ac34ce928b9d437f1bb6a2ec216"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05a02d57ddf646f029311ca8a63f4081" id="r_a05a02d57ddf646f029311ca8a63f4081"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Driver_1_1Device.html#a05a02d57ddf646f029311ca8a63f4081">wait</a> (int index) const</td></tr>
<tr class="memdesc:a05a02d57ddf646f029311ca8a63f4081"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait for a notification from the device.  <br /></td></tr>
<tr class="separator:a05a02d57ddf646f029311ca8a63f4081"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b5274cb8d4e708beea944038b855885" id="r_a3b5274cb8d4e708beea944038b855885"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Driver_1_1Device.html#a3b5274cb8d4e708beea944038b855885">wait_for_next_used</a> (<a class="el" href="classL4virtio_1_1Driver_1_1Virtqueue.html">Virtqueue</a> &amp;queue, <a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a> *len=nullptr) const</td></tr>
<tr class="memdesc:a3b5274cb8d4e708beea944038b855885"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait for the next item to arrive in the used queue and return it.  <br /></td></tr>
<tr class="separator:a3b5274cb8d4e708beea944038b855885"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72090d324268b51f3937197748c26853" id="r_a72090d324268b51f3937197748c26853"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Driver_1_1Device.html#a72090d324268b51f3937197748c26853">send</a> (<a class="el" href="classL4virtio_1_1Driver_1_1Virtqueue.html">Virtqueue</a> &amp;queue, <a class="el" href="group__l4__basic__types.html#gae8d67914f723bf843df6f311ad2619a2">l4_uint16_t</a> descno)</td></tr>
<tr class="memdesc:a72090d324268b51f3937197748c26853"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a request to the device.  <br /></td></tr>
<tr class="separator:a72090d324268b51f3937197748c26853"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Client-side implementation for a general virtio device. </p>

<p class="definition">Definition at line <a class="el" href="client_2l4virtio_source.html#l00031">31</a> of file <a class="el" href="client_2l4virtio_source.html">l4virtio</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a1c9b791b723e7e8ad2eae927094b487d" name="a1c9b791b723e7e8ad2eae927094b487d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c9b791b723e7e8ad2eae927094b487d">&#9670;&#160;</a></span>bind_notification_irq()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int L4virtio::Driver::Device::bind_notification_irq </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classL4_1_1Cap.html">L4::Cap</a>&lt; <a class="el" href="structL4_1_1Triggerable.html">L4::Triggerable</a> &gt;&#160;</td>
          <td class="paramname"><em>irq</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Register a triggerable to receive notifications from the device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">index</td><td>Index of the interrupt. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">irq</td><td>Triggerable to register for notifications. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="client_2l4virtio_source.html#l00129">129</a> of file <a class="el" href="client_2l4virtio_source.html">l4virtio</a>.</p>

<p class="reference">References <a class="el" href="irq_source.html#l00316">L4::Icu::bind()</a>, and <a class="el" href="l4_2sys_2ipc_8h_source.html#l00657">l4_error()</a>.</p>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Driver_1_1Device_a1c9b791b723e7e8ad2eae927094b487d_cgraph.svg" width="886" height="184"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="aa557ba0e56fbfc194b07440ecc796061" name="aa557ba0e56fbfc194b07440ecc796061"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa557ba0e56fbfc194b07440ecc796061">&#9670;&#160;</a></span>config_queue()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int L4virtio::Driver::Device::config_queue </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#gaf3331c485014bd12a9e4f9d27a55e689">l4_uint64_t</a>&#160;</td>
          <td class="paramname"><em>desc_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#gaf3331c485014bd12a9e4f9d27a55e689">l4_uint64_t</a>&#160;</td>
          <td class="paramname"><em>avail_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#gaf3331c485014bd12a9e4f9d27a55e689">l4_uint64_t</a>&#160;</td>
          <td class="paramname"><em>used_addr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Send the virtqueue configuration to the device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">num</td><td>Number of queue to configure. </td></tr>
    <tr><td class="paramname">size</td><td>Size of rings in the queue, must be a power of 2) </td></tr>
    <tr><td class="paramname">desc_addr</td><td>Address of descriptor table (device address) </td></tr>
    <tr><td class="paramname">avail_addr</td><td>Address of available ring (device address) </td></tr>
    <tr><td class="paramname">used_addr</td><td>Address of used ring (device address) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="client_2l4virtio_source.html#l00212">212</a> of file <a class="el" href="client_2l4virtio_source.html">l4virtio</a>.</p>

<p class="reference">References <a class="el" href="classL4virtio_1_1Device.html#a47218ed005d79308d0e297d1a731a517">L4virtio::Device::config_queue()</a>.</p>

<p class="reference">Referenced by <a class="el" href="virtio-net_source.html#l00066">L4virtio::Driver::Virtio_net_device::setup_device()</a>, and <a class="el" href="client_2virtio-block_source.html#l00092">L4virtio::Driver::Block_device::setup_device()</a>.</p>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Driver_1_1Device_aa557ba0e56fbfc194b07440ecc796061_cgraph.svg" width="402" height="51"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Driver_1_1Device_aa557ba0e56fbfc194b07440ecc796061_icgraph.svg" width="426" height="115"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="af06d27e63124749456ddc8d959231741" name="af06d27e63124749456ddc8d959231741"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af06d27e63124749456ddc8d959231741">&#9670;&#160;</a></span>driver_acknowledge()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int L4virtio::Driver::Device::driver_acknowledge </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Finalize handshake with the device. </p>
<p>Must be called after all queues have been set up and before the first request is sent. It is still possible to add more shared dataspaces after the handshake has been finished. </p>

<p class="definition">Definition at line <a class="el" href="client_2l4virtio_source.html#l00156">156</a> of file <a class="el" href="client_2l4virtio_source.html">l4virtio</a>.</p>

<p class="reference">References <a class="el" href="error__helper_source.html#l00068">L4Re::chksys()</a>, <a class="el" href="err_8h_source.html#l00057">L4_EINVAL</a>, <a class="el" href="err_8h_source.html#l00046">L4_EIO</a>, <a class="el" href="err_8h_source.html#l00055">L4_ENODEV</a>, <a class="el" href="err_8h_source.html#l00043">L4_EOK</a>, <a class="el" href="virtio_8h_source.html#l00098">L4VIRTIO_FEATURE_VERSION_1</a>, <a class="el" href="virtio_8h_source.html#l00293">l4virtio_get_feature()</a>, <a class="el" href="virtio_8h_source.html#l00088">L4VIRTIO_STATUS_DRIVER_OK</a>, <a class="el" href="virtio_8h_source.html#l00089">L4VIRTIO_STATUS_FEATURES_OK</a>, and <a class="el" href="classL4virtio_1_1Device.html#ab2e1044b9a29628c3ed7945b9dfe4cad">L4virtio::Device::set_status()</a>.</p>

<p class="reference">Referenced by <a class="el" href="virtio-net_source.html#l00066">L4virtio::Driver::Virtio_net_device::setup_device()</a>, and <a class="el" href="client_2virtio-block_source.html#l00092">L4virtio::Driver::Block_device::setup_device()</a>.</p>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Driver_1_1Device_af06d27e63124749456ddc8d959231741_cgraph.svg" width="568" height="151"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Driver_1_1Device_af06d27e63124749456ddc8d959231741_icgraph.svg" width="426" height="115"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a4f8b3d73188c3b6664755b81b80e441c" name="a4f8b3d73188c3b6664755b81b80e441c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f8b3d73188c3b6664755b81b80e441c">&#9670;&#160;</a></span>driver_connect()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void L4virtio::Driver::Device::driver_connect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classL4_1_1Cap.html">L4::Cap</a>&lt; <a class="el" href="classL4virtio_1_1Device.html">L4virtio::Device</a> &gt;&#160;</td>
          <td class="paramname"><em>srvcap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>manage_notify</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Contacts the device and starts the initial handshake. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">srvcap</td><td>Capability for device communication. </td></tr>
    <tr><td class="paramname">manage_notify</td><td>Set up a semaphore for notifications from the device. See below.</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classL4_1_1Runtime__error.html" title="Exception for an abstract runtime error.">L4::Runtime_error</a></td><td>if the initialisation fails</td></tr>
  </table>
  </dd>
</dl>
<p>This function contacts the server, sets up the notification channels and the configuration dataspace. After this is done, the caller can set up any dataspaces it needs. The initialisation then needs to be finished by calling <a class="el" href="classL4virtio_1_1Driver_1_1Device.html#af06d27e63124749456ddc8d959231741" title="Finalize handshake with the device.">driver_acknowledge()</a>.</p>
<p>Per default this function creates and registers a semaphore for receiving notification from the device. This semaphore is used in the blocking functions <a class="el" href="classL4virtio_1_1Driver_1_1Device.html#af4aa9ac34ce928b9d437f1bb6a2ec216" title="Send a request to the device and wait for it to be processed.">send_and_wait()</a>, <a class="el" href="classL4virtio_1_1Driver_1_1Device.html#a05a02d57ddf646f029311ca8a63f4081" title="Wait for a notification from the device.">wait()</a> and next_used().</p>
<p>When <code>manage_notify</code> is false, then the caller may manually register and handle notification interrupts from the device. This is for example useful, when the client runs in an application with a server loop. </p>

<p class="definition">Definition at line <a class="el" href="client_2l4virtio_source.html#l00056">56</a> of file <a class="el" href="client_2l4virtio_source.html">l4virtio</a>.</p>

<p class="reference">References <a class="el" href="irq_source.html#l00316">L4::Icu::bind()</a>, <a class="el" href="error__helper_source.html#l00145">L4Re::chkcap()</a>, <a class="el" href="error__helper_source.html#l00068">L4Re::chksys()</a>, <a class="el" href="classL4virtio_1_1Device.html#a47e53efa92534451e46ecd4fef7060da">L4virtio::Device::device_config()</a>, <a class="el" href="classL4virtio_1_1Device.html#a2c81a536513972d43f95394d88c39147">L4virtio::Device::device_notification_irq()</a>, <a class="el" href="env_source.html#l00103">L4Re::Env::env()</a>, <a class="el" href="err_8h_source.html#l00057">L4_EINVAL</a>, <a class="el" href="err_8h_source.html#l00046">L4_EIO</a>, <a class="el" href="err_8h_source.html#l00055">L4_ENODEV</a>, <a class="el" href="l4_2sys_2ipc_8h_source.html#l00657">l4_error()</a>, <a class="el" href="l4_2sys_2consts_8h_source.html#l00389">L4_PAGEMASK</a>, <a class="el" href="arm_2l4_2sys_2consts_8h_source.html#l00037">L4_PAGESHIFT</a>, <a class="el" href="l4_2sys_2consts_8h_source.html#l00380">L4_PAGESIZE</a>, <a class="el" href="l4_2sys_2consts_8h_source.html#l00407">L4_SUPERPAGESIZE</a>, <a class="el" href="virtio_8h_source.html#l00086">L4VIRTIO_STATUS_ACKNOWLEDGE</a>, <a class="el" href="virtio_8h_source.html#l00087">L4VIRTIO_STATUS_DRIVER</a>, <a class="el" href="ipc__types_source.html#l00659">L4::Ipc::make_cap_rw()</a>, <a class="el" href="rm_source.html#l00150">L4Re::Rm::F::RW</a>, <a class="el" href="rm_source.html#l00125">L4Re::Rm::F::Search_addr</a>, and <a class="el" href="classL4virtio_1_1Device.html#ab2e1044b9a29628c3ed7945b9dfe4cad">L4virtio::Device::set_status()</a>.</p>

<p class="reference">Referenced by <a class="el" href="virtio-net_source.html#l00066">L4virtio::Driver::Virtio_net_device::setup_device()</a>, and <a class="el" href="client_2virtio-block_source.html#l00092">L4virtio::Driver::Block_device::setup_device()</a>.</p>
<div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Driver_1_1Device_a4f8b3d73188c3b6664755b81b80e441c_cgraph.svg" width="960" height="539"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Driver_1_1Device_a4f8b3d73188c3b6664755b81b80e441c_icgraph.svg" width="426" height="115"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="adcbab39e15c2541a34fcd431b4a67d47" name="adcbab39e15c2541a34fcd431b4a67d47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adcbab39e15c2541a34fcd431b4a67d47">&#9670;&#160;</a></span>feature_negotiated()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool L4virtio::Driver::Device::feature_negotiated </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>feat</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if a particular feature bit was negotiated with the device. </p>
<p>The result is only valid after <a class="el" href="classL4virtio_1_1Driver_1_1Device.html#af06d27e63124749456ddc8d959231741" title="Finalize handshake with the device.">driver_acknowledge()</a> was called (when the handshake with the device was completed).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">feat</td><td>The feature bit.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>The feature is supported by both driver and device. </td></tr>
    <tr><td class="paramname">false</td><td>The feature is not supported by the driver and/or device. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="client_2l4virtio_source.html#l00145">145</a> of file <a class="el" href="client_2l4virtio_source.html">l4virtio</a>.</p>

<p class="reference">References <a class="el" href="virtio_8h_source.html#l00293">l4virtio_get_feature()</a>.</p>
<div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Driver_1_1Device_adcbab39e15c2541a34fcd431b4a67d47_cgraph.svg" width="382" height="51"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a07dd8cdbc1ce12dca8af6a540463ae23" name="a07dd8cdbc1ce12dca8af6a540463ae23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07dd8cdbc1ce12dca8af6a540463ae23">&#9670;&#160;</a></span>max_queue_size()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int L4virtio::Driver::Device::max_queue_size </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Maximum queue size allowed by the device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">num</td><td>Number of queue for which to determine the maximum size. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="client_2l4virtio_source.html#l00230">230</a> of file <a class="el" href="client_2l4virtio_source.html">l4virtio</a>.</p>

<p class="reference">Referenced by <a class="el" href="virtio-net_source.html#l00047">L4virtio::Driver::Virtio_net_device::rx_queue_size()</a>, <a class="el" href="client_2virtio-block_source.html#l00092">L4virtio::Driver::Block_device::setup_device()</a>, and <a class="el" href="virtio-net_source.html#l00054">L4virtio::Driver::Virtio_net_device::tx_queue_size()</a>.</p>
<div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Driver_1_1Device_a07dd8cdbc1ce12dca8af6a540463ae23_icgraph.svg" width="675" height="179"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a7a5c440b8353e0bd030a552334e7e5a3" name="a7a5c440b8353e0bd030a552334e7e5a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a5c440b8353e0bd030a552334e7e5a3">&#9670;&#160;</a></span>register_ds()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int L4virtio::Driver::Device::register_ds </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classL4_1_1Cap.html">L4::Cap</a>&lt; <a class="el" href="classL4Re_1_1Dataspace.html">L4Re::Dataspace</a> &gt;&#160;</td>
          <td class="paramname"><em>ds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#ga1c2c4b333f75b1d05b59855910f2b9cb">l4_umword_t</a>&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#ga1c2c4b333f75b1d05b59855910f2b9cb">l4_umword_t</a>&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#gaf3331c485014bd12a9e4f9d27a55e689">l4_uint64_t</a> *&#160;</td>
          <td class="paramname"><em>devaddr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Share a dataspace with the device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ds</td><td>Dataspace to share with the device. </td></tr>
    <tr><td class="paramname">offset</td><td>Offset in dataspace where the shared part starts. </td></tr>
    <tr><td class="paramname">size</td><td>Total size in bytes of the shared space. </td></tr>
    <tr><td class="paramname">devaddr</td><td>Start of shared space in the device address space.</td></tr>
  </table>
  </dd>
</dl>
<p>Although this function allows to share only a part of the given dataspace for convenience, the granularity of sharing is always the dataspace level. Thus, the remainder of the dataspace is not protected from the device.</p>
<p>When communicating with the device, addresses must be given with respect to the device address space. This is not the same as the virtual address space of the client in order to not leak information about the address space layout. </p>

<p class="definition">Definition at line <a class="el" href="client_2l4virtio_source.html#l00196">196</a> of file <a class="el" href="client_2l4virtio_source.html">l4virtio</a>.</p>

<p class="reference">References <a class="el" href="ipc__types_source.html#l00659">L4::Ipc::make_cap_rw()</a>, and <a class="el" href="classL4virtio_1_1Device.html#a033005cb79e876d02b8ca405ffadca2b">L4virtio::Device::register_ds()</a>.</p>

<p class="reference">Referenced by <a class="el" href="virtio-net_source.html#l00066">L4virtio::Driver::Virtio_net_device::setup_device()</a>, and <a class="el" href="client_2virtio-block_source.html#l00092">L4virtio::Driver::Block_device::setup_device()</a>.</p>
<div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Driver_1_1Device_a7a5c440b8353e0bd030a552334e7e5a3_cgraph.svg" width="435" height="86"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Driver_1_1Device_a7a5c440b8353e0bd030a552334e7e5a3_icgraph.svg" width="426" height="115"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a72090d324268b51f3937197748c26853" name="a72090d324268b51f3937197748c26853"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72090d324268b51f3937197748c26853">&#9670;&#160;</a></span>send()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void L4virtio::Driver::Device::send </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classL4virtio_1_1Driver_1_1Virtqueue.html">Virtqueue</a> &amp;&#160;</td>
          <td class="paramname"><em>queue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#gae8d67914f723bf843df6f311ad2619a2">l4_uint16_t</a>&#160;</td>
          <td class="paramname"><em>descno</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Send a request to the device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">queue</td><td>Queue that contains the request in its descriptor table </td></tr>
    <tr><td class="paramname">descno</td><td>Index of first entry in descriptor table where </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="client_2l4virtio_source.html#l00312">312</a> of file <a class="el" href="client_2l4virtio_source.html">l4virtio</a>.</p>

<p class="reference">References <a class="el" href="virtqueue_source.html#l00580">L4virtio::Driver::Virtqueue::enqueue_descriptor()</a>.</p>

<p class="reference">Referenced by <a class="el" href="client_2l4virtio_source.html#l00247">send_and_wait()</a>, <a class="el" href="client_2virtio-block_source.html#l00265">L4virtio::Driver::Block_device::send_request()</a>, and <a class="el" href="virtio-net_source.html#l00224">L4virtio::Driver::Virtio_net_device::tx()</a>.</p>
<div id="dynsection-13" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Driver_1_1Device_a72090d324268b51f3937197748c26853_cgraph.svg" width="422" height="51"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-14" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Driver_1_1Device_a72090d324268b51f3937197748c26853_icgraph.svg" width="638" height="179"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="af4aa9ac34ce928b9d437f1bb6a2ec216" name="af4aa9ac34ce928b9d437f1bb6a2ec216"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4aa9ac34ce928b9d437f1bb6a2ec216">&#9670;&#160;</a></span>send_and_wait()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int L4virtio::Driver::Device::send_and_wait </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classL4virtio_1_1Driver_1_1Virtqueue.html">Virtqueue</a> &amp;&#160;</td>
          <td class="paramname"><em>queue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#gae8d67914f723bf843df6f311ad2619a2">l4_uint16_t</a>&#160;</td>
          <td class="paramname"><em>descno</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Send a request to the device and wait for it to be processed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">queue</td><td>Queue that contains the request in its descriptor table </td></tr>
    <tr><td class="paramname">descno</td><td>Index of first entry in descriptor table where</td></tr>
  </table>
  </dd>
</dl>
<p>This function provides a simple mechanism to send requests synchronously. It must not be used with other requests at the same time as it directly waits for a notification on the device irq cap.</p>
<dl class="section pre"><dt>Precondition</dt><dd><a class="el" href="classL4virtio_1_1Driver_1_1Device.html#a4f8b3d73188c3b6664755b81b80e441c" title="Contacts the device and starts the initial handshake.">driver_connect()</a> was called with manage_notify. </dd></dl>

<p class="definition">Definition at line <a class="el" href="client_2l4virtio_source.html#l00247">247</a> of file <a class="el" href="client_2l4virtio_source.html">l4virtio</a>.</p>

<p class="reference">References <a class="el" href="err_8h_source.html#l00057">L4_EINVAL</a>, <a class="el" href="err_8h_source.html#l00043">L4_EOK</a>, <a class="el" href="client_2l4virtio_source.html#l00312">send()</a>, and <a class="el" href="client_2l4virtio_source.html#l00291">wait_for_next_used()</a>.</p>

<p class="reference">Referenced by <a class="el" href="client_2virtio-block_source.html#l00306">L4virtio::Driver::Block_device::process_request()</a>.</p>
<div id="dynsection-15" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Driver_1_1Device_af4aa9ac34ce928b9d437f1bb6a2ec216_cgraph.svg" width="995" height="196"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-16" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-16-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-16-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-16-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Driver_1_1Device_af4aa9ac34ce928b9d437f1bb6a2ec216_icgraph.svg" width="418" height="51"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a05a02d57ddf646f029311ca8a63f4081" name="a05a02d57ddf646f029311ca8a63f4081"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05a02d57ddf646f029311ca8a63f4081">&#9670;&#160;</a></span>wait()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int L4virtio::Driver::Device::wait </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Wait for a notification from the device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>Notification slot to wait for.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd><a class="el" href="classL4virtio_1_1Driver_1_1Device.html#a4f8b3d73188c3b6664755b81b80e441c" title="Contacts the device and starts the initial handshake.">driver_connect()</a> was called with manage_notify. </dd></dl>

<p class="definition">Definition at line <a class="el" href="client_2l4virtio_source.html#l00268">268</a> of file <a class="el" href="client_2l4virtio_source.html">l4virtio</a>.</p>

<p class="reference">References <a class="el" href="err_8h_source.html#l00054">L4_EEXIST</a>, <a class="el" href="l4_2sys_2ipc_8h_source.html#l00640">l4_ipc_error()</a>, and <a class="el" href="l4_2sys_2utcb_8h_source.html#l00340">l4_utcb()</a>.</p>

<p class="reference">Referenced by <a class="el" href="client_2l4virtio_source.html#l00291">wait_for_next_used()</a>.</p>
<div id="dynsection-17" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-17-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-17-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-17-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Driver_1_1Device_a05a02d57ddf646f029311ca8a63f4081_cgraph.svg" width="536" height="86"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-18" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-18-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-18-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-18-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Driver_1_1Device_a05a02d57ddf646f029311ca8a63f4081_icgraph.svg" width="858" height="115"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a3b5274cb8d4e708beea944038b855885" name="a3b5274cb8d4e708beea944038b855885"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b5274cb8d4e708beea944038b855885">&#9670;&#160;</a></span>wait_for_next_used()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int L4virtio::Driver::Device::wait_for_next_used </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classL4virtio_1_1Driver_1_1Virtqueue.html">Virtqueue</a> &amp;&#160;</td>
          <td class="paramname"><em>queue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a> *&#160;</td>
          <td class="paramname"><em>len</em> = <code>nullptr</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Wait for the next item to arrive in the used queue and return it. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">queue</td><td>A queue. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">len</td><td>(optional) Size of valid data in finished block. Note that this is the value reported by the device, which may set it to a value that is larger than the original buffer size. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">&gt;=0</td><td>Descriptor number of item removed from used queue. </td></tr>
    <tr><td class="paramname">&lt;0</td><td>IPC error while waiting for notification.</td></tr>
  </table>
  </dd>
</dl>
<p>The call blocks until the next item is available in the used queue.</p>
<dl class="section pre"><dt>Precondition</dt><dd><a class="el" href="classL4virtio_1_1Driver_1_1Device.html#a4f8b3d73188c3b6664755b81b80e441c" title="Contacts the device and starts the initial handshake.">driver_connect()</a> was called with manage_notify. </dd></dl>

<p class="definition">Definition at line <a class="el" href="client_2l4virtio_source.html#l00291">291</a> of file <a class="el" href="client_2l4virtio_source.html">l4virtio</a>.</p>

<p class="reference">References <a class="el" href="virtqueue_source.html#l00615">L4virtio::Driver::Virtqueue::find_next_used()</a>, and <a class="el" href="client_2l4virtio_source.html#l00268">wait()</a>.</p>

<p class="reference">Referenced by <a class="el" href="client_2l4virtio_source.html#l00247">send_and_wait()</a>, and <a class="el" href="virtio-net_source.html#l00176">L4virtio::Driver::Virtio_net_device::wait_rx()</a>.</p>
<div id="dynsection-19" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-19-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-19-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-19-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Driver_1_1Device_a3b5274cb8d4e708beea944038b855885_cgraph.svg" width="775" height="132"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-20" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-20-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-20-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-20-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Driver_1_1Device_a3b5274cb8d4e708beea944038b855885_icgraph.svg" width="638" height="115"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>l4/l4virtio/client/<a class="el" href="client_2l4virtio_source.html">l4virtio</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceL4virtio.html">L4virtio</a></li><li class="navelem"><b>Driver</b></li><li class="navelem"><a class="el" href="classL4virtio_1_1Driver_1_1Device.html">Device</a></li>
    <li class="footer">Generated on Sat Aug 24 2024 15:54:33 for L4Re Operating System Framework by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
