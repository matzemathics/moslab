<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>L4Re Operating System Framework: L4virtio::Svr::Console::Virtio_con Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="l4re-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="L4Re_rgb_logo_quer_hg_h55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">L4Re Operating System Framework
   </div>
   <div id="projectbrief">Interface and Usage Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle"><div class="title">L4virtio::Svr::Console::Virtio_con Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div></div>
</div><!--header-->
<div class="contents">

<p>Base class implementing a virtio console functionality.  
 <a href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="virtio-console_source.html">virtio-console</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Inheritance diagram for L4virtio::Svr::Console::Virtio_con:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con__inherit__graph.svg" width="212" height="1046"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Collaboration diagram for L4virtio::Svr::Console::Virtio_con:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con__coll__graph.svg" width="794" height="2179"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a91e490d2fb56abc72771fbef8edf1d70" id="r_a91e490d2fb56abc72771fbef8edf1d70"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#a91e490d2fb56abc72771fbef8edf1d70">Virtio_con</a> (unsigned max_ports, bool enable_multiport)</td></tr>
<tr class="memdesc:a91e490d2fb56abc72771fbef8edf1d70"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new multiport console device.  <br /></td></tr>
<tr class="separator:a91e490d2fb56abc72771fbef8edf1d70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a907c7c33a513325d49c3214f94b2f600" id="r_a907c7c33a513325d49c3214f94b2f600"><td class="memItemLeft" align="right" valign="top"><a id="a907c7c33a513325d49c3214f94b2f600" name="a907c7c33a513325d49c3214f94b2f600"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>reconfig_queue</b> (unsigned index) override</td></tr>
<tr class="memdesc:a907c7c33a513325d49c3214f94b2f600"><td class="mdescLeft">&#160;</td><td class="mdescRight">callback for client queue-config request <br /></td></tr>
<tr class="separator:a907c7c33a513325d49c3214f94b2f600"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44a02eb2274372cb6df5cfe7cf966537" id="r_a44a02eb2274372cb6df5cfe7cf966537"><td class="memItemLeft" align="right" valign="top"><a id="a44a02eb2274372cb6df5cfe7cf966537" name="a44a02eb2274372cb6df5cfe7cf966537"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>multiport_enabled</b> () const</td></tr>
<tr class="memdesc:a44a02eb2274372cb6df5cfe7cf966537"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return true if the multiport feature is enabled and control queues are available. <br /></td></tr>
<tr class="separator:a44a02eb2274372cb6df5cfe7cf966537"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68d5e6ef1b7a3d192396805724ee4bdc" id="r_a68d5e6ef1b7a3d192396805724ee4bdc"><td class="memItemLeft" align="right" valign="top"><a id="a68d5e6ef1b7a3d192396805724ee4bdc" name="a68d5e6ef1b7a3d192396805724ee4bdc"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>check_features</b> (void) override</td></tr>
<tr class="memdesc:a68d5e6ef1b7a3d192396805724ee4bdc"><td class="mdescLeft">&#160;</td><td class="mdescRight">callback for checking the subset of accepted features <br /></td></tr>
<tr class="separator:a68d5e6ef1b7a3d192396805724ee4bdc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05dafd1c2afd4c83381de815d42fda9b" id="r_a05dafd1c2afd4c83381de815d42fda9b"><td class="memItemLeft" align="right" valign="top"><a id="a05dafd1c2afd4c83381de815d42fda9b" name="a05dafd1c2afd4c83381de815d42fda9b"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>check_queues</b> () override</td></tr>
<tr class="memdesc:a05dafd1c2afd4c83381de815d42fda9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">callback for checking if the queues at DRIVER_OK transition <br /></td></tr>
<tr class="separator:a05dafd1c2afd4c83381de815d42fda9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88e370a9d1c9e029a8de04f68e380457" id="r_a88e370a9d1c9e029a8de04f68e380457"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#a88e370a9d1c9e029a8de04f68e380457">port_add</a> (unsigned idx)</td></tr>
<tr class="memdesc:a88e370a9d1c9e029a8de04f68e380457"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a DEVICE_ADD message and update the internal state.  <br /></td></tr>
<tr class="separator:a88e370a9d1c9e029a8de04f68e380457"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8335db1f605263cb6ccf2109b8993944" id="r_a8335db1f605263cb6ccf2109b8993944"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#a8335db1f605263cb6ccf2109b8993944">port_remove</a> (unsigned idx)</td></tr>
<tr class="memdesc:a8335db1f605263cb6ccf2109b8993944"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a DEVICE_REMOVE message and update the internal state.  <br /></td></tr>
<tr class="separator:a8335db1f605263cb6ccf2109b8993944"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71decef04824571dd001527b9cff8ccb" id="r_a71decef04824571dd001527b9cff8ccb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#a71decef04824571dd001527b9cff8ccb">port_open</a> (unsigned idx, bool open)</td></tr>
<tr class="memdesc:a71decef04824571dd001527b9cff8ccb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a PORT_OPEN message and update the internal state.  <br /></td></tr>
<tr class="separator:a71decef04824571dd001527b9cff8ccb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade546fa843dcfb4a0412757fee9834d7" id="r_ade546fa843dcfb4a0412757fee9834d7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#ade546fa843dcfb4a0412757fee9834d7">send_control_message</a> (<a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a> idx, <a class="el" href="group__l4__basic__types.html#gae8d67914f723bf843df6f311ad2619a2">l4_uint16_t</a> event, <a class="el" href="group__l4__basic__types.html#gae8d67914f723bf843df6f311ad2619a2">l4_uint16_t</a> value=0, const char *name=0)</td></tr>
<tr class="memdesc:ade546fa843dcfb4a0412757fee9834d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send control message to driver.  <br /></td></tr>
<tr class="separator:ade546fa843dcfb4a0412757fee9834d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3766f6b0a63966a6063ae540bb844a1" id="r_ab3766f6b0a63966a6063ae540bb844a1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#ab3766f6b0a63966a6063ae540bb844a1">handle_control_message</a> ()</td></tr>
<tr class="memdesc:ab3766f6b0a63966a6063ae540bb844a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle control message received from the driver.  <br /></td></tr>
<tr class="separator:ab3766f6b0a63966a6063ae540bb844a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6af9e7a53e9707319c9b46425e583594" id="r_a6af9e7a53e9707319c9b46425e583594"><td class="memItemLeft" align="right" valign="top"><a id="a6af9e7a53e9707319c9b46425e583594" name="a6af9e7a53e9707319c9b46425e583594"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>reset</b> () override</td></tr>
<tr class="memdesc:a6af9e7a53e9707319c9b46425e583594"><td class="mdescLeft">&#160;</td><td class="mdescRight">reset callback, called for doing a device reset <br /></td></tr>
<tr class="separator:a6af9e7a53e9707319c9b46425e583594"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0acfd3f46918e6d382201745a4ffb2d1" id="r_a0acfd3f46918e6d382201745a4ffb2d1"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#a0acfd3f46918e6d382201745a4ffb2d1">reset_device</a> ()</td></tr>
<tr class="memdesc:a0acfd3f46918e6d382201745a4ffb2d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset the state of the actual console device.  <br /></td></tr>
<tr class="separator:a0acfd3f46918e6d382201745a4ffb2d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6947ed06c4dc7dc219e41824f21f9a19" id="r_a6947ed06c4dc7dc219e41824f21f9a19"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#a6947ed06c4dc7dc219e41824f21f9a19">notify_queue</a> (<a class="el" href="classL4virtio_1_1Svr_1_1Virtqueue.html">Virtqueue</a> *queue)=0</td></tr>
<tr class="memdesc:a6947ed06c4dc7dc219e41824f21f9a19"><td class="mdescLeft">&#160;</td><td class="mdescRight">Notify queue of available data.  <br /></td></tr>
<tr class="separator:a6947ed06c4dc7dc219e41824f21f9a19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabb98e78ce5301c2a15e116871046cfd" id="r_aabb98e78ce5301c2a15e116871046cfd"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="structL4virtio_1_1Svr_1_1Console_1_1Port.html">Port</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#aabb98e78ce5301c2a15e116871046cfd">port</a> (unsigned port)=0</td></tr>
<tr class="memdesc:aabb98e78ce5301c2a15e116871046cfd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the specified port.  <br /></td></tr>
<tr class="separator:aabb98e78ce5301c2a15e116871046cfd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a881b5ba4878d2d4393bc87112a88aa68" id="r_a881b5ba4878d2d4393bc87112a88aa68"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#a881b5ba4878d2d4393bc87112a88aa68">process_device_ready</a> (<a class="el" href="group__l4__basic__types.html#gae8d67914f723bf843df6f311ad2619a2">l4_uint16_t</a> value)=0</td></tr>
<tr class="memdesc:a881b5ba4878d2d4393bc87112a88aa68"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback called on DEVICE_READY event.  <br /></td></tr>
<tr class="separator:a881b5ba4878d2d4393bc87112a88aa68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a756ca0c5c7dfb856c3a53c7d8e8bcbbf" id="r_a756ca0c5c7dfb856c3a53c7d8e8bcbbf"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#a756ca0c5c7dfb856c3a53c7d8e8bcbbf">process_port_ready</a> (<a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a> id, <a class="el" href="group__l4__basic__types.html#gae8d67914f723bf843df6f311ad2619a2">l4_uint16_t</a> value)</td></tr>
<tr class="memdesc:a756ca0c5c7dfb856c3a53c7d8e8bcbbf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback called on PORT_READY event.  <br /></td></tr>
<tr class="separator:a756ca0c5c7dfb856c3a53c7d8e8bcbbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0484023e58f9540275d31a9aac94dd22" id="r_a0484023e58f9540275d31a9aac94dd22"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#a0484023e58f9540275d31a9aac94dd22">process_port_open</a> (<a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a> id, <a class="el" href="group__l4__basic__types.html#gae8d67914f723bf843df6f311ad2619a2">l4_uint16_t</a> value)=0</td></tr>
<tr class="memdesc:a0484023e58f9540275d31a9aac94dd22"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback called on PORT_OPEN event.  <br /></td></tr>
<tr class="separator:a0484023e58f9540275d31a9aac94dd22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classL4virtio_1_1Svr_1_1Device__t')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classL4virtio_1_1Svr_1_1Device__t.html">L4virtio::Svr::Device_t&lt; DATA &gt;</a></td></tr>
<tr class="memitem:a2c191fe0524b519a6262f557ebf9f2be inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t" id="r_a2c191fe0524b519a6262f557ebf9f2be"><td class="memItemLeft" align="right" valign="top">
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>cfg_changed</b> (unsigned)</td></tr>
<tr class="memdesc:a2c191fe0524b519a6262f557ebf9f2be inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">callback for client device configuration changes <br /></td></tr>
<tr class="separator:a2c191fe0524b519a6262f557ebf9f2be inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8047b37ac63d6b5f84bcb1886a06f1b2 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t" id="r_a8047b37ac63d6b5f84bcb1886a06f1b2"><td class="memItemLeft" align="right" valign="top">
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>register_single_driver_irq</b> ()</td></tr>
<tr class="memdesc:a8047b37ac63d6b5f84bcb1886a06f1b2 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">callback for registering a single guest IRQ for all queues (old-style) <br /></td></tr>
<tr class="separator:a8047b37ac63d6b5f84bcb1886a06f1b2 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4555e9697f41bc44c313496af829d215 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t" id="r_a4555e9697f41bc44c313496af829d215"><td class="memItemLeft" align="right" valign="top">
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>trigger_driver_config_irq</b> ()=0</td></tr>
<tr class="memdesc:a4555e9697f41bc44c313496af829d215 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">callback for triggering configuration change notification IRQ <br /></td></tr>
<tr class="separator:a4555e9697f41bc44c313496af829d215 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae96ab79bacd9bb862b0cf2aa4d3d18ac inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t" id="r_ae96ab79bacd9bb862b0cf2aa4d3d18ac"><td class="memItemLeft" align="right" valign="top">
virtual <a class="el" href="classL4_1_1Cap.html">L4::Cap</a>&lt; <a class="el" href="classL4_1_1Irq.html">L4::Irq</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>device_notify_irq</b> () const</td></tr>
<tr class="memdesc:ae96ab79bacd9bb862b0cf2aa4d3d18ac inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">callback to gather the device notification IRQ (old-style) <br /></td></tr>
<tr class="separator:ae96ab79bacd9bb862b0cf2aa4d3d18ac inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66d09e200e34ccad61e5843d2b5bb0a0 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t" id="r_a66d09e200e34ccad61e5843d2b5bb0a0"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Device__t.html#a66d09e200e34ccad61e5843d2b5bb0a0">register_driver_irq</a> (unsigned idx)</td></tr>
<tr class="memdesc:a66d09e200e34ccad61e5843d2b5bb0a0 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback for registering an notification IRQ (multi IRQ).  <br /></td></tr>
<tr class="separator:a66d09e200e34ccad61e5843d2b5bb0a0 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae684a9e7816579ca93e4f3bf6c765999 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t" id="r_ae684a9e7816579ca93e4f3bf6c765999"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classL4_1_1Cap.html">L4::Cap</a>&lt; <a class="el" href="classL4_1_1Irq.html">L4::Irq</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Device__t.html#ae684a9e7816579ca93e4f3bf6c765999">device_notify_irq</a> (unsigned idx)</td></tr>
<tr class="memdesc:ae684a9e7816579ca93e4f3bf6c765999 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback to gather the device notification IRQ (multi IRQ).  <br /></td></tr>
<tr class="separator:ae684a9e7816579ca93e4f3bf6c765999 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9536bf0c6e00b566c78c6abe80a68780 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t" id="r_a9536bf0c6e00b566c78c6abe80a68780"><td class="memItemLeft" align="right" valign="top">
virtual unsigned&#160;</td><td class="memItemRight" valign="bottom"><b>num_events_supported</b> () const</td></tr>
<tr class="memdesc:a9536bf0c6e00b566c78c6abe80a68780 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the highest notification index supported. <br /></td></tr>
<tr class="separator:a9536bf0c6e00b566c78c6abe80a68780 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ce755ee0579fb70926d762ba67bb66f inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t" id="r_a7ce755ee0579fb70926d762ba67bb66f"><td class="memItemLeft" align="right" valign="top">
&#160;</td><td class="memItemRight" valign="bottom"><b>Device_t</b> (<a class="el" href="classL4virtio_1_1Svr_1_1Dev__config.html">Dev_config</a> *dev_config)</td></tr>
<tr class="memdesc:a7ce755ee0579fb70926d762ba67bb66f inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make a device for the given config. <br /></td></tr>
<tr class="separator:a7ce755ee0579fb70926d762ba67bb66f inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac35c61db0aec9e96ee18170bf5bb17b4 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t" id="r_ac35c61db0aec9e96ee18170bf5bb17b4"><td class="memItemLeft" align="right" valign="top">
Mem_list const *&#160;</td><td class="memItemRight" valign="bottom"><b>mem_info</b> () const</td></tr>
<tr class="memdesc:ac35c61db0aec9e96ee18170bf5bb17b4 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the memory region list used for this device. <br /></td></tr>
<tr class="separator:ac35c61db0aec9e96ee18170bf5bb17b4 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedbe988112e98750e5409a8c92358dcf inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t" id="r_aedbe988112e98750e5409a8c92358dcf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Device__t.html#aedbe988112e98750e5409a8c92358dcf">reset_queue_config</a> (unsigned idx, unsigned num_max, bool inc_generation=false)</td></tr>
<tr class="memdesc:aedbe988112e98750e5409a8c92358dcf inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Trigger reset for the configuration space for queue <em>idx</em>.  <br /></td></tr>
<tr class="separator:aedbe988112e98750e5409a8c92358dcf inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac13ae09cfc41fad98bd25c2d76bfac63 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t" id="r_ac13ae09cfc41fad98bd25c2d76bfac63"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Device__t.html#ac13ae09cfc41fad98bd25c2d76bfac63">init_mem_info</a> (unsigned num)</td></tr>
<tr class="memdesc:ac13ae09cfc41fad98bd25c2d76bfac63 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the memory region list to the given maximum.  <br /></td></tr>
<tr class="separator:ac13ae09cfc41fad98bd25c2d76bfac63 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29f780ecb04509d8b72f4a155b073c74 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t" id="r_a29f780ecb04509d8b72f4a155b073c74"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Device__t.html#a29f780ecb04509d8b72f4a155b073c74">device_error</a> ()</td></tr>
<tr class="memdesc:a29f780ecb04509d8b72f4a155b073c74 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transition device into DEVICE_NEEDS_RESET state.  <br /></td></tr>
<tr class="separator:a29f780ecb04509d8b72f4a155b073c74 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab906b4cc61026fd815a8056f07bef10e inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t" id="r_ab906b4cc61026fd815a8056f07bef10e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Device__t.html#ab906b4cc61026fd815a8056f07bef10e">setup_queue</a> (<a class="el" href="classL4virtio_1_1Svr_1_1Virtqueue.html">Virtqueue</a> *q, unsigned qn, unsigned num_max)</td></tr>
<tr class="memdesc:ab906b4cc61026fd815a8056f07bef10e inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable/disable the specified queue.  <br /></td></tr>
<tr class="separator:ab906b4cc61026fd815a8056f07bef10e inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a460f5dc2b32e33a616eb822ffd2f88f0 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t" id="r_a460f5dc2b32e33a616eb822ffd2f88f0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Device__t.html#a460f5dc2b32e33a616eb822ffd2f88f0">handle_mem_cmd_write</a> ()</td></tr>
<tr class="memdesc:a460f5dc2b32e33a616eb822ffd2f88f0 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check for a value in the <code>cmd</code> register and handle a write.  <br /></td></tr>
<tr class="separator:a460f5dc2b32e33a616eb822ffd2f88f0 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade1572aa45b90682de1e05f08590d7e3 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t" id="r_ade1572aa45b90682de1e05f08590d7e3"><td class="memItemLeft" align="right" valign="top">
void&#160;</td><td class="memItemRight" valign="bottom"><b>enable_trusted_ds_validation</b> ()</td></tr>
<tr class="memdesc:ade1572aa45b90682de1e05f08590d7e3 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable trusted dataspace validation. <br /></td></tr>
<tr class="separator:ade1572aa45b90682de1e05f08590d7e3 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38406c5353e2f96de8c667a6d5c5f5f1 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t" id="r_a38406c5353e2f96de8c667a6d5c5f5f1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Device__t.html#a38406c5353e2f96de8c667a6d5c5f5f1">add_trusted_dataspaces</a> (std::shared_ptr&lt; Ds_vector const &gt; ds)</td></tr>
<tr class="memdesc:a38406c5353e2f96de8c667a6d5c5f5f1 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Provide a list of trusted dataspaces that can be used for validation.  <br /></td></tr>
<tr class="separator:a38406c5353e2f96de8c667a6d5c5f5f1 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="inherited" name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_attribs_classL4virtio_1_1Svr_1_1Device__t"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classL4virtio_1_1Svr_1_1Device__t')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classL4virtio_1_1Svr_1_1Device__t.html">L4virtio::Svr::Device_t&lt; DATA &gt;</a></td></tr>
<tr class="memitem:a4ff8b5e4425d1b720b9751fbe501f68d inherit pro_attribs_classL4virtio_1_1Svr_1_1Device__t" id="r_a4ff8b5e4425d1b720b9751fbe501f68d"><td class="memItemLeft" align="right" valign="top">
Mem_list&#160;</td><td class="memItemRight" valign="bottom"><b>_mem_info</b></td></tr>
<tr class="memdesc:a4ff8b5e4425d1b720b9751fbe501f68d inherit pro_attribs_classL4virtio_1_1Svr_1_1Device__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Memory region list. <br /></td></tr>
<tr class="separator:a4ff8b5e4425d1b720b9751fbe501f68d inherit pro_attribs_classL4virtio_1_1Svr_1_1Device__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Base class implementing a virtio console functionality. </p>
<p>It is possible to activate the MULTIPORT feature, in which case incoming control messages need to be dispatched by calling <code><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#ab3766f6b0a63966a6063ae540bb844a1" title="Handle control message received from the driver.">handle_control_message()</a></code>. The derived class must additionally override <code><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#a881b5ba4878d2d4393bc87112a88aa68" title="Callback called on DEVICE_READY event.">process_device_ready()</a></code>, <code><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#a756ca0c5c7dfb856c3a53c7d8e8bcbbf" title="Callback called on PORT_READY event.">process_port_ready()</a></code> and <code><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#a0484023e58f9540275d31a9aac94dd22" title="Callback called on PORT_OPEN event.">process_port_open()</a></code> to implement the actual behaviour. The derived class has the following responsibilities:</p><ul>
<li>inform the driver about usable ports once the device is ready as signaled in <a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#a881b5ba4878d2d4393bc87112a88aa68" title="Callback called on DEVICE_READY event.">process_device_ready()</a>, see the wrapper <code><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#a88e370a9d1c9e029a8de04f68e380457" title="Send a DEVICE_ADD message and update the internal state.">port_add()</a></code>.</li>
<li>inform the driver about unusable ports, see the wrapper <code><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#a8335db1f605263cb6ccf2109b8993944" title="Send a DEVICE_REMOVE message and update the internal state.">port_remove()</a></code>.</li>
<li>react to open/close events, see the wrapper <code><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#a71decef04824571dd001527b9cff8ccb" title="Send a PORT_OPEN message and update the internal state.">port_open()</a></code>.</li>
</ul>
<p>This implementation provides no means to handle interrupts or notify guests, therefore derived classes have to provide this functionality, see <code><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#a6947ed06c4dc7dc219e41824f21f9a19" title="Notify queue of available data.">notify_queue()</a></code> and <code><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#ab3766f6b0a63966a6063ae540bb844a1" title="Handle control message received from the driver.">handle_control_message()</a></code>. Similarly, all interaction with data queues has to be implemented. Memory for port structures must be managed by the implementor as well.</p>
<p>Use this class as a base to implement your own specific console device. </p>

<p class="definition">Definition at line <a class="el" href="virtio-console_source.html#l00185">185</a> of file <a class="el" href="virtio-console_source.html">virtio-console</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a91e490d2fb56abc72771fbef8edf1d70" name="a91e490d2fb56abc72771fbef8edf1d70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91e490d2fb56abc72771fbef8edf1d70">&#9670;&#160;</a></span>Virtio_con()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">L4virtio::Svr::Console::Virtio_con::Virtio_con </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>max_ports</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>enable_multiport</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a new multiport console device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">max_ports</td><td>Maximum number of ports the device should be able to handle (ignored when <code>enable_multiport</code> is false). </td></tr>
    <tr><td class="paramname">enable_multiport</td><td>Enable the control queue for dynamic handling of ports. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="virtio-console_source.html#l00211">211</a> of file <a class="el" href="virtio-console_source.html">virtio-console</a>.</p>

<p class="reference">References <a class="el" href="error__helper_source.html#l00068">L4Re::chksys()</a>, <a class="el" href="virtio-console_source.html#l00025">L4virtio::Svr::Console::Features::console_multiport()</a>, <a class="el" href="err_8h_source.html#l00057">L4_EINVAL</a>, and <a class="el" href="virtio_source.html#l00068">L4virtio::Svr::Dev_features::raw</a>.</p>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con_a91e490d2fb56abc72771fbef8edf1d70_cgraph.svg" width="623" height="102"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ab3766f6b0a63966a6063ae540bb844a1" name="ab3766f6b0a63966a6063ae540bb844a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3766f6b0a63966a6063ae540bb844a1">&#9670;&#160;</a></span>handle_control_message()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int L4virtio::Svr::Console::Virtio_con::handle_control_message </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handle control message received from the driver. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">L4_EOK</td><td>Message has been handled. </td></tr>
    <tr><td class="paramname">-L4_ENODEV</td><td>Control queue is not ready. </td></tr>
    <tr><td class="paramname">-L4_EBUSY</td><td>Currently no descriptor available in the control queue. </td></tr>
    <tr><td class="paramname">-L4_EINVAL</td><td>Received an unexpected control event.</td></tr>
  </table>
  </dd>
</dl>
<p>This function performs the basic handling of control messages from the driver. It does all necessary work with the control queues and performs some sanity checks. All other work is deferred to the derived class, see <code><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#a881b5ba4878d2d4393bc87112a88aa68" title="Callback called on DEVICE_READY event.">process_device_ready()</a></code>, <code><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#a756ca0c5c7dfb856c3a53c7d8e8bcbbf" title="Callback called on PORT_READY event.">process_port_ready()</a></code> and <code><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#a0484023e58f9540275d31a9aac94dd22" title="Callback called on PORT_OPEN event.">process_port_open()</a></code>. </p>

<p class="definition">Definition at line <a class="el" href="virtio-console_source.html#l00443">443</a> of file <a class="el" href="virtio-console_source.html">virtio-console</a>.</p>

<p class="reference">References <a class="el" href="virtio_source.html#l00171">L4virtio::Svr::Virtqueue::consumed()</a>, <a class="el" href="virtio-console_source.html#l00037">L4virtio::Svr::Console::Control_message::Device_ready</a>, <a class="el" href="virtio-console_source.html#l00055">L4virtio::Svr::Console::Control_message::event</a>, <a class="el" href="virtio-console_source.html#l00054">L4virtio::Svr::Console::Control_message::id</a>, <a class="el" href="err_8h_source.html#l00057">L4_EINVAL</a>, <a class="el" href="err_8h_source.html#l00055">L4_ENODEV</a>, <a class="el" href="err_8h_source.html#l00043">L4_EOK</a>, <a class="el" href="virtio-console_source.html#l00070">L4virtio::Svr::Console::Control_request::len</a>, <a class="el" href="virtio-console_source.html#l00068">L4virtio::Svr::Console::Control_request::msg</a>, <a class="el" href="virtio_source.html#l00138">L4virtio::Svr::Virtqueue::next_avail()</a>, <a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#aabb98e78ce5301c2a15e116871046cfd">port()</a>, <a class="el" href="virtio-console_source.html#l00117">L4virtio::Svr::Console::Port::Port_added</a>, <a class="el" href="virtio-console_source.html#l00115">L4virtio::Svr::Console::Port::Port_disabled</a>, <a class="el" href="virtio-console_source.html#l00049">L4virtio::Svr::Console::Control_message::Port_open</a>, <a class="el" href="virtio-console_source.html#l00121">L4virtio::Svr::Console::Port::Port_open</a>, <a class="el" href="virtio-console_source.html#l00043">L4virtio::Svr::Console::Control_message::Port_ready</a>, <a class="el" href="virtio-console_source.html#l00119">L4virtio::Svr::Console::Port::Port_ready</a>, <a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#a881b5ba4878d2d4393bc87112a88aa68">process_device_ready()</a>, <a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#a0484023e58f9540275d31a9aac94dd22">process_port_open()</a>, <a class="el" href="virtio-console_source.html#l00606">process_port_ready()</a>, <a class="el" href="virtqueue_source.html#l00406">L4virtio::Virtqueue::ready()</a>, <a class="el" href="virtio_source.html#l00482">L4virtio::Svr::Request_processor::start()</a>, <a class="el" href="virtio-console_source.html#l00131">L4virtio::Svr::Console::Port::status</a>, <a class="el" href="virtio-console_source.html#l00129">L4virtio::Svr::Console::Port::tx</a>, and <a class="el" href="virtio-console_source.html#l00056">L4virtio::Svr::Console::Control_message::value</a>.</p>

<p class="reference">Referenced by <a class="el" href="virtio-console-device_source.html#l00400">L4virtio::Svr::Console::Device::do_control_work()</a>.</p>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con_ab3766f6b0a63966a6063ae540bb844a1_cgraph.svg" width="655" height="646"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con_ab3766f6b0a63966a6063ae540bb844a1_icgraph.svg" width="448" height="66"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a6947ed06c4dc7dc219e41824f21f9a19" name="a6947ed06c4dc7dc219e41824f21f9a19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6947ed06c4dc7dc219e41824f21f9a19">&#9670;&#160;</a></span>notify_queue()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void L4virtio::Svr::Console::Virtio_con::notify_queue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classL4virtio_1_1Svr_1_1Virtqueue.html">Virtqueue</a> *&#160;</td>
          <td class="paramname"><em>queue</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Notify queue of available data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">queue</td><td><a class="el" href="classL4virtio_1_1Svr_1_1Virtqueue.html" title="Virtqueue implementation for the device.">Virtqueue</a> to notify.</td></tr>
  </table>
  </dd>
</dl>
<p>This callback is called whenever data is sent to <code>queue</code>. It is the responsibility of the derived class to perform all necessary notification actions, e.g. triggering guest interrupts. </p>

<p>Implemented in <a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Device.html#a04be7d77cf99a295ec0e4f32693858ed">L4virtio::Svr::Console::Device</a>.</p>

</div>
</div>
<a id="aabb98e78ce5301c2a15e116871046cfd" name="aabb98e78ce5301c2a15e116871046cfd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aabb98e78ce5301c2a15e116871046cfd">&#9670;&#160;</a></span>port()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="structL4virtio_1_1Svr_1_1Console_1_1Port.html">Port</a> * L4virtio::Svr::Console::Virtio_con::port </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>port</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the specified port. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td><a class="el" href="structL4virtio_1_1Svr_1_1Console_1_1Port.html" title="Representation of a Virtio console port.">Port</a> number.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd><a class="el" href="structL4virtio_1_1Svr_1_1Console_1_1Port.html" title="Representation of a Virtio console port.">Port</a> number must be lower than the configured maximum number of ports. </dd></dl>

<p>Implemented in <a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Device.html#a3d7102514d25d0a1e706ef902760b18c">L4virtio::Svr::Console::Device</a>.</p>

<p class="reference">Referenced by <a class="el" href="virtio-console_source.html#l00267">check_queues()</a>, <a class="el" href="virtio-console_source.html#l00443">handle_control_message()</a>, <a class="el" href="virtio-console_source.html#l00298">port_add()</a>, <a class="el" href="virtio-console_source.html#l00355">port_open()</a>, <a class="el" href="virtio-console_source.html#l00325">port_remove()</a>, <a class="el" href="virtio-console_source.html#l00606">process_port_ready()</a>, and <a class="el" href="virtio-console_source.html#l00541">reset()</a>.</p>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con_aabb98e78ce5301c2a15e116871046cfd_icgraph.svg" width="927" height="438"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a88e370a9d1c9e029a8de04f68e380457" name="a88e370a9d1c9e029a8de04f68e380457"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88e370a9d1c9e029a8de04f68e380457">&#9670;&#160;</a></span>port_add()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int L4virtio::Svr::Console::Virtio_con::port_add </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>idx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Send a DEVICE_ADD message and update the internal state. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">idx</td><td><a class="el" href="structL4virtio_1_1Svr_1_1Console_1_1Port.html" title="Representation of a Virtio console port.">Port</a> that should be added.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">L4_EOK</td><td>Message has been sent. </td></tr>
    <tr><td class="paramname">-L4_EPERM</td><td>Control message is not allowed in the current state. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Errors from <a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#ade546fa843dcfb4a0412757fee9834d7" title="Send control message to driver.">send_control_message()</a></dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd><code>port</code> must be smaller than the configured number of ports. </dd>
<dd>
<a class="el" href="structL4virtio_1_1Svr_1_1Console_1_1Port.html" title="Representation of a Virtio console port.">Port</a> must not already exist. </dd></dl>

<p class="definition">Definition at line <a class="el" href="virtio-console_source.html#l00298">298</a> of file <a class="el" href="virtio-console_source.html">virtio-console</a>.</p>

<p class="reference">References <a class="el" href="virtio-console_source.html#l00039">L4virtio::Svr::Console::Control_message::Device_add</a>, <a class="el" href="err_8h_source.html#l00043">L4_EOK</a>, <a class="el" href="err_8h_source.html#l00044">L4_EPERM</a>, <a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#aabb98e78ce5301c2a15e116871046cfd">port()</a>, <a class="el" href="virtio-console_source.html#l00117">L4virtio::Svr::Console::Port::Port_added</a>, <a class="el" href="virtio-console_source.html#l00115">L4virtio::Svr::Console::Port::Port_disabled</a>, <a class="el" href="virtio-console_source.html#l00393">send_control_message()</a>, and <a class="el" href="virtio-console_source.html#l00131">L4virtio::Svr::Console::Port::status</a>.</p>

<p class="reference">Referenced by <a class="el" href="virtio-console-device_source.html#l00426">L4virtio::Svr::Console::Device::process_device_ready()</a>, and <a class="el" href="virtio-console-device_source.html#l00478">L4virtio::Svr::Console::Device::resend_stalled_control_messages()</a>.</p>
<div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con_a88e370a9d1c9e029a8de04f68e380457_cgraph.svg" width="851" height="358"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con_a88e370a9d1c9e029a8de04f68e380457_icgraph.svg" width="684" height="131"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a71decef04824571dd001527b9cff8ccb" name="a71decef04824571dd001527b9cff8ccb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71decef04824571dd001527b9cff8ccb">&#9670;&#160;</a></span>port_open()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int L4virtio::Svr::Console::Virtio_con::port_open </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>open</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Send a PORT_OPEN message and update the internal state. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">idx</td><td><a class="el" href="structL4virtio_1_1Svr_1_1Console_1_1Port.html" title="Representation of a Virtio console port.">Port</a> that should be opened or closed. </td></tr>
    <tr><td class="paramname">open</td><td>Open or close port.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">L4_EOK</td><td>Message has been sent. </td></tr>
    <tr><td class="paramname">-L4_EPERM</td><td>Control message is not allowed in the current state. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Errors from <a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#ade546fa843dcfb4a0412757fee9834d7" title="Send control message to driver.">send_control_message()</a></dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd><code>port</code> must be smaller than the configured number of ports. </dd>
<dd>
<a class="el" href="structL4virtio_1_1Svr_1_1Console_1_1Port.html" title="Representation of a Virtio console port.">Port</a> must already exist. </dd></dl>

<p class="definition">Definition at line <a class="el" href="virtio-console_source.html#l00355">355</a> of file <a class="el" href="virtio-console_source.html">virtio-console</a>.</p>

<p class="reference">References <a class="el" href="err_8h_source.html#l00043">L4_EOK</a>, <a class="el" href="err_8h_source.html#l00044">L4_EPERM</a>, <a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#aabb98e78ce5301c2a15e116871046cfd">port()</a>, <a class="el" href="virtio-console_source.html#l00049">L4virtio::Svr::Console::Control_message::Port_open</a>, <a class="el" href="virtio-console_source.html#l00121">L4virtio::Svr::Console::Port::Port_open</a>, <a class="el" href="virtio-console_source.html#l00119">L4virtio::Svr::Console::Port::Port_ready</a>, <a class="el" href="virtio-console_source.html#l00393">send_control_message()</a>, and <a class="el" href="virtio-console_source.html#l00131">L4virtio::Svr::Console::Port::status</a>.</p>

<p class="reference">Referenced by <a class="el" href="virtio-console-device_source.html#l00470">L4virtio::Svr::Console::Device::process_port_open()</a>, and <a class="el" href="virtio-console-device_source.html#l00478">L4virtio::Svr::Console::Device::resend_stalled_control_messages()</a>.</p>
<div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con_a71decef04824571dd001527b9cff8ccb_cgraph.svg" width="859" height="358"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con_a71decef04824571dd001527b9cff8ccb_icgraph.svg" width="671" height="131"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a8335db1f605263cb6ccf2109b8993944" name="a8335db1f605263cb6ccf2109b8993944"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8335db1f605263cb6ccf2109b8993944">&#9670;&#160;</a></span>port_remove()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int L4virtio::Svr::Console::Virtio_con::port_remove </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>idx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Send a DEVICE_REMOVE message and update the internal state. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">idx</td><td><a class="el" href="structL4virtio_1_1Svr_1_1Console_1_1Port.html" title="Representation of a Virtio console port.">Port</a> that should be removed.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">L4_EOK</td><td>Message has been sent. </td></tr>
    <tr><td class="paramname">-L4_EPERM</td><td>Control message is not allowed in the current state. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Errors from <a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#ade546fa843dcfb4a0412757fee9834d7" title="Send control message to driver.">send_control_message()</a></dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd><code>port</code> must be smaller than the configured number of ports. </dd>
<dd>
<a class="el" href="structL4virtio_1_1Svr_1_1Console_1_1Port.html" title="Representation of a Virtio console port.">Port</a> must already exist. </dd></dl>

<p class="definition">Definition at line <a class="el" href="virtio-console_source.html#l00325">325</a> of file <a class="el" href="virtio-console_source.html">virtio-console</a>.</p>

<p class="reference">References <a class="el" href="virtio-console_source.html#l00041">L4virtio::Svr::Console::Control_message::Device_remove</a>, <a class="el" href="err_8h_source.html#l00043">L4_EOK</a>, <a class="el" href="err_8h_source.html#l00044">L4_EPERM</a>, <a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#aabb98e78ce5301c2a15e116871046cfd">port()</a>, <a class="el" href="virtio-console_source.html#l00123">L4virtio::Svr::Console::Port::Port_failed</a>, <a class="el" href="virtio-console_source.html#l00121">L4virtio::Svr::Console::Port::Port_open</a>, <a class="el" href="virtio-console_source.html#l00119">L4virtio::Svr::Console::Port::Port_ready</a>, <a class="el" href="virtio-console_source.html#l00145">L4virtio::Svr::Console::Port::reset()</a>, <a class="el" href="virtio-console_source.html#l00393">send_control_message()</a>, and <a class="el" href="virtio-console_source.html#l00131">L4virtio::Svr::Console::Port::status</a>.</p>

<p class="reference">Referenced by <a class="el" href="virtio-console-device_source.html#l00448">L4virtio::Svr::Console::Device::process_port_ready()</a>, and <a class="el" href="virtio-console-device_source.html#l00478">L4virtio::Svr::Console::Device::resend_stalled_control_messages()</a>.</p>
<div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con_a8335db1f605263cb6ccf2109b8993944_cgraph.svg" width="878" height="398"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con_a8335db1f605263cb6ccf2109b8993944_icgraph.svg" width="695" height="131"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a881b5ba4878d2d4393bc87112a88aa68" name="a881b5ba4878d2d4393bc87112a88aa68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a881b5ba4878d2d4393bc87112a88aa68">&#9670;&#160;</a></span>process_device_ready()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void L4virtio::Svr::Console::Virtio_con::process_device_ready </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#gae8d67914f723bf843df6f311ad2619a2">l4_uint16_t</a>&#160;</td>
          <td class="paramname"><em>value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Callback called on DEVICE_READY event. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">value</td><td>The value field of the control message, indicating if the initialization was successful.</td></tr>
  </table>
  </dd>
</dl>
<p>Needs to be overridden by the derived class if the MULTIPORT feature is enabled. Control messages may be sent only after the driver has successfully initialized the device. </p>

<p>Implemented in <a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Device.html#a7a27d977561bcd659d54644f91b3a307">L4virtio::Svr::Console::Device</a>.</p>

<p class="reference">Referenced by <a class="el" href="virtio-console_source.html#l00443">handle_control_message()</a>.</p>
<div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con_a881b5ba4878d2d4393bc87112a88aa68_icgraph.svg" width="656" height="66"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a0484023e58f9540275d31a9aac94dd22" name="a0484023e58f9540275d31a9aac94dd22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0484023e58f9540275d31a9aac94dd22">&#9670;&#160;</a></span>process_port_open()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void L4virtio::Svr::Console::Virtio_con::process_port_open </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a>&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#gae8d67914f723bf843df6f311ad2619a2">l4_uint16_t</a>&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Callback called on PORT_OPEN event. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>The id field of the control message, i.e. the port number. </td></tr>
    <tr><td class="paramname">value</td><td>The value field of the control message, indicating if the port was opened or closed.</td></tr>
  </table>
  </dd>
</dl>
<p>Needs to be overridden by the derived class if the MULTIPORT feature is enabled. The device must acknowledge the message by calling <code><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#a71decef04824571dd001527b9cff8ccb" title="Send a PORT_OPEN message and update the internal state.">port_open()</a></code>. </p>

<p>Implemented in <a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Device.html#a718fd3f1885b00a1ac6f0d9d33e4b9f4">L4virtio::Svr::Console::Device</a>.</p>

<p class="reference">Referenced by <a class="el" href="virtio-console_source.html#l00443">handle_control_message()</a>.</p>
<div id="dynsection-13" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con_a0484023e58f9540275d31a9aac94dd22_icgraph.svg" width="656" height="66"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a756ca0c5c7dfb856c3a53c7d8e8bcbbf" name="a756ca0c5c7dfb856c3a53c7d8e8bcbbf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a756ca0c5c7dfb856c3a53c7d8e8bcbbf">&#9670;&#160;</a></span>process_port_ready()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void L4virtio::Svr::Console::Virtio_con::process_port_ready </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a>&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#gae8d67914f723bf843df6f311ad2619a2">l4_uint16_t</a>&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Callback called on PORT_READY event. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>The id field of the control message, i.e. the port number. </td></tr>
    <tr><td class="paramname">value</td><td>The value field of the control message, indicating if the initialization was successful.</td></tr>
  </table>
  </dd>
</dl>
<p>May be overridden by the derived class if the MULTIPORT feature is enabled. This default implementation just sets the status of the port according to the driver message. </p>

<p>Reimplemented in <a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Device.html#a7dde9e63b6fb498c87b6c1ed9e60198f">L4virtio::Svr::Console::Device</a>.</p>

<p class="definition">Definition at line <a class="el" href="virtio-console_source.html#l00606">606</a> of file <a class="el" href="virtio-console_source.html">virtio-console</a>.</p>

<p class="reference">References <a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#aabb98e78ce5301c2a15e116871046cfd">port()</a>, <a class="el" href="virtio-console_source.html#l00117">L4virtio::Svr::Console::Port::Port_added</a>, <a class="el" href="virtio-console_source.html#l00123">L4virtio::Svr::Console::Port::Port_failed</a>, <a class="el" href="virtio-console_source.html#l00121">L4virtio::Svr::Console::Port::Port_open</a>, <a class="el" href="virtio-console_source.html#l00119">L4virtio::Svr::Console::Port::Port_ready</a>, and <a class="el" href="virtio-console_source.html#l00131">L4virtio::Svr::Console::Port::status</a>.</p>

<p class="reference">Referenced by <a class="el" href="virtio-console_source.html#l00443">handle_control_message()</a>, and <a class="el" href="virtio-console-device_source.html#l00448">L4virtio::Svr::Console::Device::process_port_ready()</a>.</p>
<div id="dynsection-14" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con_a756ca0c5c7dfb856c3a53c7d8e8bcbbf_cgraph.svg" width="379" height="66"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-15" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con_a756ca0c5c7dfb856c3a53c7d8e8bcbbf_icgraph.svg" width="668" height="131"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a0acfd3f46918e6d382201745a4ffb2d1" name="a0acfd3f46918e6d382201745a4ffb2d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0acfd3f46918e6d382201745a4ffb2d1">&#9670;&#160;</a></span>reset_device()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void L4virtio::Svr::Console::Virtio_con::reset_device </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reset the state of the actual console device. </p>
<p>This callback is called at the end of <code><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#a6af9e7a53e9707319c9b46425e583594" title="reset callback, called for doing a device reset">reset()</a></code>, allowing the derived class to reset internal state. </p>

<p class="definition">Definition at line <a class="el" href="virtio-console_source.html#l00560">560</a> of file <a class="el" href="virtio-console_source.html">virtio-console</a>.</p>

<p class="reference">Referenced by <a class="el" href="virtio-console_source.html#l00541">reset()</a>.</p>
<div id="dynsection-16" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-16-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-16-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-16-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con_a0acfd3f46918e6d382201745a4ffb2d1_icgraph.svg" width="406" height="51"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ade546fa843dcfb4a0412757fee9834d7" name="ade546fa843dcfb4a0412757fee9834d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade546fa843dcfb4a0412757fee9834d7">&#9670;&#160;</a></span>send_control_message()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int L4virtio::Svr::Console::Virtio_con::send_control_message </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a>&#160;</td>
          <td class="paramname"><em>idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#gae8d67914f723bf843df6f311ad2619a2">l4_uint16_t</a>&#160;</td>
          <td class="paramname"><em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#gae8d67914f723bf843df6f311ad2619a2">l4_uint16_t</a>&#160;</td>
          <td class="paramname"><em>value</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Send control message to driver. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">idx</td><td><a class="el" href="structL4virtio_1_1Svr_1_1Console_1_1Port.html" title="Representation of a Virtio console port.">Port</a> number. </td></tr>
    <tr><td class="paramname">event</td><td>Kind of control event. </td></tr>
    <tr><td class="paramname">value</td><td>Extra information for the event. </td></tr>
    <tr><td class="paramname">name</td><td>Name to be used for Port_name message</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">L4_EOK</td><td>Message has been sent. </td></tr>
    <tr><td class="paramname">-L4_ENODEV</td><td>Control queue is not ready. </td></tr>
    <tr><td class="paramname">-L4_EBUSY</td><td>Currently no descriptor available in the control queue. </td></tr>
    <tr><td class="paramname">-L4_ENOMEM</td><td>Client-issued descriptor too small. <a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Device.html" title="Base class implementing a virtio console device with L4Re-based notification handling.">Device</a> will be set to failed state.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd><code>port</code> must be smaller than the configured number of ports.</dd></dl>
<p>The convenience functions <code><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#a88e370a9d1c9e029a8de04f68e380457" title="Send a DEVICE_ADD message and update the internal state.">port_add()</a></code>, <code><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#a8335db1f605263cb6ccf2109b8993944" title="Send a DEVICE_REMOVE message and update the internal state.">port_remove()</a></code> and <code><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#a71decef04824571dd001527b9cff8ccb" title="Send a PORT_OPEN message and update the internal state.">port_open()</a></code> should cover the most use cases and are the preferred way of communication with the driver. If you use this function directly, it is your responsibility to guarantee no invalid control messages are sent to the driver. </p>

<p class="definition">Definition at line <a class="el" href="virtio-console_source.html#l00393">393</a> of file <a class="el" href="virtio-console_source.html">virtio-console</a>.</p>

<p class="reference">References <a class="el" href="virtio_source.html#l00221">L4virtio::Svr::Virtqueue::finish()</a>, <a class="el" href="err_8h_source.html#l00053">L4_EBUSY</a>, <a class="el" href="err_8h_source.html#l00055">L4_ENODEV</a>, <a class="el" href="err_8h_source.html#l00050">L4_ENOMEM</a>, <a class="el" href="err_8h_source.html#l00043">L4_EOK</a>, <a class="el" href="virtio-console_source.html#l00070">L4virtio::Svr::Console::Control_request::len</a>, <a class="el" href="virtio-console_source.html#l00068">L4virtio::Svr::Console::Control_request::msg</a>, <a class="el" href="virtio_source.html#l00138">L4virtio::Svr::Virtqueue::next_avail()</a>, <a class="el" href="virtio-console_source.html#l00051">L4virtio::Svr::Console::Control_message::Port_name</a>, <a class="el" href="virtqueue_source.html#l00406">L4virtio::Virtqueue::ready()</a>, <a class="el" href="virtio-console_source.html#l00130">L4virtio::Svr::Console::Port::rx</a>, and <a class="el" href="virtio_source.html#l00482">L4virtio::Svr::Request_processor::start()</a>.</p>

<p class="reference">Referenced by <a class="el" href="virtio-console_source.html#l00298">port_add()</a>, <a class="el" href="virtio-console_source.html#l00355">port_open()</a>, and <a class="el" href="virtio-console_source.html#l00325">port_remove()</a>.</p>
<div id="dynsection-17" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-17-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-17-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-17-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con_ade546fa843dcfb4a0412757fee9834d7_cgraph.svg" width="643" height="358"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-18" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-18-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-18-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-18-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con_ade546fa843dcfb4a0412757fee9834d7_icgraph.svg" width="946" height="259"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>l4/l4virtio/server/<a class="el" href="virtio-console_source.html">virtio-console</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceL4virtio.html">L4virtio</a></li><li class="navelem"><b>Svr</b></li><li class="navelem"><b>Console</b></li><li class="navelem"><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html">Virtio_con</a></li>
    <li class="footer">Generated on Sat Aug 24 2024 15:54:33 for L4Re Operating System Framework by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
