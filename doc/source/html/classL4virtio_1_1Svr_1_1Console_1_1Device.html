<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>L4Re Operating System Framework: L4virtio::Svr::Console::Device Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="l4re-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="L4Re_rgb_logo_quer_hg_h55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">L4Re Operating System Framework
   </div>
   <div id="projectbrief">Interface and Usage Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classL4virtio_1_1Svr_1_1Console_1_1Device.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a>  </div>
  <div class="headertitle"><div class="title">L4virtio::Svr::Console::Device Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div></div>
</div><!--header-->
<div class="contents">

<p>Base class implementing a virtio console device with L4Re-based notification handling.  
 <a href="classL4virtio_1_1Svr_1_1Console_1_1Device.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="virtio-console-device_source.html">virtio-console-device</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Inheritance diagram for L4virtio::Svr::Console::Device:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Svr_1_1Console_1_1Device__inherit__graph.svg" width="212" height="1046"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Collaboration diagram for L4virtio::Svr::Console::Device:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Svr_1_1Console_1_1Device__coll__graph.svg" width="794" height="2592"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab5ed1b50212197887ca23efd1ac6f393" id="r_ab5ed1b50212197887ca23efd1ac6f393"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Device.html#ab5ed1b50212197887ca23efd1ac6f393">Device</a> (unsigned vq_max)</td></tr>
<tr class="memdesc:ab5ed1b50212197887ca23efd1ac6f393"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new console device.  <br /></td></tr>
<tr class="separator:ab5ed1b50212197887ca23efd1ac6f393"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c5a3f713007f64cc2ed052622b6741b" id="r_a0c5a3f713007f64cc2ed052622b6741b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Device.html#a0c5a3f713007f64cc2ed052622b6741b">Device</a> (unsigned vq_max, unsigned ports)</td></tr>
<tr class="memdesc:a0c5a3f713007f64cc2ed052622b6741b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new console device.  <br /></td></tr>
<tr class="separator:a0c5a3f713007f64cc2ed052622b6741b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf10e85eddb60b7f4c5e5a8d21e63919" id="r_acf10e85eddb60b7f4c5e5a8d21e63919"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Device.html#acf10e85eddb60b7f4c5e5a8d21e63919">Device</a> (<a class="el" href="classcxx_1_1static__vector.html">cxx::static_vector</a>&lt; unsigned &gt; const &amp;vq_max_nums)</td></tr>
<tr class="memdesc:acf10e85eddb60b7f4c5e5a8d21e63919"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new console <a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Device.html" title="Base class implementing a virtio console device with L4Re-based notification handling.">Device</a>.  <br /></td></tr>
<tr class="separator:acf10e85eddb60b7f4c5e5a8d21e63919"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd3abeb259c86c3eea5d63b772e01cdd" id="r_afd3abeb259c86c3eea5d63b772e01cdd"><td class="memItemLeft" align="right" valign="top"><a id="afd3abeb259c86c3eea5d63b772e01cdd" name="afd3abeb259c86c3eea5d63b772e01cdd"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>register_single_driver_irq</b> () override</td></tr>
<tr class="memdesc:afd3abeb259c86c3eea5d63b772e01cdd"><td class="mdescLeft">&#160;</td><td class="mdescRight">callback for registering a single guest IRQ for all queues (old-style) <br /></td></tr>
<tr class="separator:afd3abeb259c86c3eea5d63b772e01cdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cc202dfe559615519164f8329bd0a00" id="r_a6cc202dfe559615519164f8329bd0a00"><td class="memItemLeft" align="right" valign="top"><a id="a6cc202dfe559615519164f8329bd0a00" name="a6cc202dfe559615519164f8329bd0a00"></a>
<a class="el" href="classL4_1_1Cap.html">L4::Cap</a>&lt; <a class="el" href="classL4_1_1Irq.html">L4::Irq</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>device_notify_irq</b> () const override</td></tr>
<tr class="memdesc:a6cc202dfe559615519164f8329bd0a00"><td class="mdescLeft">&#160;</td><td class="mdescRight">callback to gather the device notification IRQ (old-style) <br /></td></tr>
<tr class="separator:a6cc202dfe559615519164f8329bd0a00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04be7d77cf99a295ec0e4f32693858ed" id="r_a04be7d77cf99a295ec0e4f32693858ed"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Device.html#a04be7d77cf99a295ec0e4f32693858ed">notify_queue</a> (<a class="el" href="classL4virtio_1_1Svr_1_1Virtqueue.html">Virtqueue</a> *queue) override</td></tr>
<tr class="memdesc:a04be7d77cf99a295ec0e4f32693858ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Notify queue of available data.  <br /></td></tr>
<tr class="separator:a04be7d77cf99a295ec0e4f32693858ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac02eaed9949cce2ed28416a5c0e99711" id="r_ac02eaed9949cce2ed28416a5c0e99711"><td class="memItemLeft" align="right" valign="top"><a id="ac02eaed9949cce2ed28416a5c0e99711" name="ac02eaed9949cce2ed28416a5c0e99711"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>rx_data_available</b> (unsigned <a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Device.html#a3d7102514d25d0a1e706ef902760b18c">port</a>)=0</td></tr>
<tr class="memdesc:ac02eaed9949cce2ed28416a5c0e99711"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback to notify that new data is available to be read from <em>port</em>. <br /></td></tr>
<tr class="separator:ac02eaed9949cce2ed28416a5c0e99711"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2eb163dbbe274b4aef9a8dc678208b64" id="r_a2eb163dbbe274b4aef9a8dc678208b64"><td class="memItemLeft" align="right" valign="top"><a id="a2eb163dbbe274b4aef9a8dc678208b64" name="a2eb163dbbe274b4aef9a8dc678208b64"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>tx_space_available</b> (unsigned <a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Device.html#a3d7102514d25d0a1e706ef902760b18c">port</a>)=0</td></tr>
<tr class="memdesc:a2eb163dbbe274b4aef9a8dc678208b64"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback to notify that data can be written to <em>port</em>. <br /></td></tr>
<tr class="separator:a2eb163dbbe274b4aef9a8dc678208b64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa300eaf1d383817e2c68f6e8c0c0486e" id="r_aa300eaf1d383817e2c68f6e8c0c0486e"><td class="memItemLeft" align="right" valign="top"><a id="aa300eaf1d383817e2c68f6e8c0c0486e" name="aa300eaf1d383817e2c68f6e8c0c0486e"></a>
virtual bool&#160;</td><td class="memItemRight" valign="bottom"><b>queues_stopped</b> ()</td></tr>
<tr class="memdesc:aa300eaf1d383817e2c68f6e8c0c0486e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return true, if the queues should not be processed further. <br /></td></tr>
<tr class="separator:aa300eaf1d383817e2c68f6e8c0c0486e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0713566a2ce8ca38b03dffaf95fa60f9" id="r_a0713566a2ce8ca38b03dffaf95fa60f9"><td class="memItemLeft" align="right" valign="top"><a id="a0713566a2ce8ca38b03dffaf95fa60f9" name="a0713566a2ce8ca38b03dffaf95fa60f9"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>trigger_driver_config_irq</b> () override</td></tr>
<tr class="memdesc:a0713566a2ce8ca38b03dffaf95fa60f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">callback for triggering configuration change notification IRQ <br /></td></tr>
<tr class="separator:a0713566a2ce8ca38b03dffaf95fa60f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf4b1bbf927d4d40b2532a7a18bf21bd" id="r_acf4b1bbf927d4d40b2532a7a18bf21bd"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Device.html#acf4b1bbf927d4d40b2532a7a18bf21bd">port_read</a> (char *buf, unsigned len, unsigned <a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Device.html#a3d7102514d25d0a1e706ef902760b18c">port</a>=0)</td></tr>
<tr class="memdesc:acf4b1bbf927d4d40b2532a7a18bf21bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read data from port.  <br /></td></tr>
<tr class="separator:acf4b1bbf927d4d40b2532a7a18bf21bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b906c9cec86e9cf30dff4fe1edf1b11" id="r_a5b906c9cec86e9cf30dff4fe1edf1b11"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Device.html#a5b906c9cec86e9cf30dff4fe1edf1b11">port_write</a> (char const *buf, unsigned len, unsigned <a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Device.html#a3d7102514d25d0a1e706ef902760b18c">port</a>=0)</td></tr>
<tr class="memdesc:a5b906c9cec86e9cf30dff4fe1edf1b11"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write data to port.  <br /></td></tr>
<tr class="separator:a5b906c9cec86e9cf30dff4fe1edf1b11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7df13c65e5b01e4bd8140a1c9b6b3858" id="r_a7df13c65e5b01e4bd8140a1c9b6b3858"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Device.html#a7df13c65e5b01e4bd8140a1c9b6b3858">do_control_work</a> ()</td></tr>
<tr class="memdesc:a7df13c65e5b01e4bd8140a1c9b6b3858"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive new control messages and resend stalled ones.  <br /></td></tr>
<tr class="separator:a7df13c65e5b01e4bd8140a1c9b6b3858"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a27d977561bcd659d54644f91b3a307" id="r_a7a27d977561bcd659d54644f91b3a307"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Device.html#a7a27d977561bcd659d54644f91b3a307">process_device_ready</a> (<a class="el" href="group__l4__basic__types.html#gae8d67914f723bf843df6f311ad2619a2">l4_uint16_t</a> value) override</td></tr>
<tr class="memdesc:a7a27d977561bcd659d54644f91b3a307"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback called on DEVICE_READY event.  <br /></td></tr>
<tr class="separator:a7a27d977561bcd659d54644f91b3a307"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dde9e63b6fb498c87b6c1ed9e60198f" id="r_a7dde9e63b6fb498c87b6c1ed9e60198f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Device.html#a7dde9e63b6fb498c87b6c1ed9e60198f">process_port_ready</a> (<a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a> id, <a class="el" href="group__l4__basic__types.html#gae8d67914f723bf843df6f311ad2619a2">l4_uint16_t</a> value) override</td></tr>
<tr class="memdesc:a7dde9e63b6fb498c87b6c1ed9e60198f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback called on PORT_READY event.  <br /></td></tr>
<tr class="separator:a7dde9e63b6fb498c87b6c1ed9e60198f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a718fd3f1885b00a1ac6f0d9d33e4b9f4" id="r_a718fd3f1885b00a1ac6f0d9d33e4b9f4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Device.html#a718fd3f1885b00a1ac6f0d9d33e4b9f4">process_port_open</a> (<a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a> id, <a class="el" href="group__l4__basic__types.html#gae8d67914f723bf843df6f311ad2619a2">l4_uint16_t</a> value) override</td></tr>
<tr class="memdesc:a718fd3f1885b00a1ac6f0d9d33e4b9f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback called on PORT_OPEN event.  <br /></td></tr>
<tr class="separator:a718fd3f1885b00a1ac6f0d9d33e4b9f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classL4virtio_1_1Svr_1_1Console_1_1Virtio__con"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classL4virtio_1_1Svr_1_1Console_1_1Virtio__con')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html">L4virtio::Svr::Console::Virtio_con</a></td></tr>
<tr class="memitem:a91e490d2fb56abc72771fbef8edf1d70 inherit pub_methods_classL4virtio_1_1Svr_1_1Console_1_1Virtio__con" id="r_a91e490d2fb56abc72771fbef8edf1d70"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#a91e490d2fb56abc72771fbef8edf1d70">Virtio_con</a> (unsigned max_ports, bool enable_multiport)</td></tr>
<tr class="memdesc:a91e490d2fb56abc72771fbef8edf1d70 inherit pub_methods_classL4virtio_1_1Svr_1_1Console_1_1Virtio__con"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new multiport console device.  <br /></td></tr>
<tr class="separator:a91e490d2fb56abc72771fbef8edf1d70 inherit pub_methods_classL4virtio_1_1Svr_1_1Console_1_1Virtio__con"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a907c7c33a513325d49c3214f94b2f600 inherit pub_methods_classL4virtio_1_1Svr_1_1Console_1_1Virtio__con" id="r_a907c7c33a513325d49c3214f94b2f600"><td class="memItemLeft" align="right" valign="top">
int&#160;</td><td class="memItemRight" valign="bottom"><b>reconfig_queue</b> (unsigned index) override</td></tr>
<tr class="memdesc:a907c7c33a513325d49c3214f94b2f600 inherit pub_methods_classL4virtio_1_1Svr_1_1Console_1_1Virtio__con"><td class="mdescLeft">&#160;</td><td class="mdescRight">callback for client queue-config request <br /></td></tr>
<tr class="separator:a907c7c33a513325d49c3214f94b2f600 inherit pub_methods_classL4virtio_1_1Svr_1_1Console_1_1Virtio__con"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44a02eb2274372cb6df5cfe7cf966537 inherit pub_methods_classL4virtio_1_1Svr_1_1Console_1_1Virtio__con" id="r_a44a02eb2274372cb6df5cfe7cf966537"><td class="memItemLeft" align="right" valign="top">
bool&#160;</td><td class="memItemRight" valign="bottom"><b>multiport_enabled</b> () const</td></tr>
<tr class="memdesc:a44a02eb2274372cb6df5cfe7cf966537 inherit pub_methods_classL4virtio_1_1Svr_1_1Console_1_1Virtio__con"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return true if the multiport feature is enabled and control queues are available. <br /></td></tr>
<tr class="separator:a44a02eb2274372cb6df5cfe7cf966537 inherit pub_methods_classL4virtio_1_1Svr_1_1Console_1_1Virtio__con"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68d5e6ef1b7a3d192396805724ee4bdc inherit pub_methods_classL4virtio_1_1Svr_1_1Console_1_1Virtio__con" id="r_a68d5e6ef1b7a3d192396805724ee4bdc"><td class="memItemLeft" align="right" valign="top">
bool&#160;</td><td class="memItemRight" valign="bottom"><b>check_features</b> (void) override</td></tr>
<tr class="memdesc:a68d5e6ef1b7a3d192396805724ee4bdc inherit pub_methods_classL4virtio_1_1Svr_1_1Console_1_1Virtio__con"><td class="mdescLeft">&#160;</td><td class="mdescRight">callback for checking the subset of accepted features <br /></td></tr>
<tr class="separator:a68d5e6ef1b7a3d192396805724ee4bdc inherit pub_methods_classL4virtio_1_1Svr_1_1Console_1_1Virtio__con"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05dafd1c2afd4c83381de815d42fda9b inherit pub_methods_classL4virtio_1_1Svr_1_1Console_1_1Virtio__con" id="r_a05dafd1c2afd4c83381de815d42fda9b"><td class="memItemLeft" align="right" valign="top">
bool&#160;</td><td class="memItemRight" valign="bottom"><b>check_queues</b> () override</td></tr>
<tr class="memdesc:a05dafd1c2afd4c83381de815d42fda9b inherit pub_methods_classL4virtio_1_1Svr_1_1Console_1_1Virtio__con"><td class="mdescLeft">&#160;</td><td class="mdescRight">callback for checking if the queues at DRIVER_OK transition <br /></td></tr>
<tr class="separator:a05dafd1c2afd4c83381de815d42fda9b inherit pub_methods_classL4virtio_1_1Svr_1_1Console_1_1Virtio__con"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88e370a9d1c9e029a8de04f68e380457 inherit pub_methods_classL4virtio_1_1Svr_1_1Console_1_1Virtio__con" id="r_a88e370a9d1c9e029a8de04f68e380457"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#a88e370a9d1c9e029a8de04f68e380457">port_add</a> (unsigned idx)</td></tr>
<tr class="memdesc:a88e370a9d1c9e029a8de04f68e380457 inherit pub_methods_classL4virtio_1_1Svr_1_1Console_1_1Virtio__con"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a DEVICE_ADD message and update the internal state.  <br /></td></tr>
<tr class="separator:a88e370a9d1c9e029a8de04f68e380457 inherit pub_methods_classL4virtio_1_1Svr_1_1Console_1_1Virtio__con"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8335db1f605263cb6ccf2109b8993944 inherit pub_methods_classL4virtio_1_1Svr_1_1Console_1_1Virtio__con" id="r_a8335db1f605263cb6ccf2109b8993944"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#a8335db1f605263cb6ccf2109b8993944">port_remove</a> (unsigned idx)</td></tr>
<tr class="memdesc:a8335db1f605263cb6ccf2109b8993944 inherit pub_methods_classL4virtio_1_1Svr_1_1Console_1_1Virtio__con"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a DEVICE_REMOVE message and update the internal state.  <br /></td></tr>
<tr class="separator:a8335db1f605263cb6ccf2109b8993944 inherit pub_methods_classL4virtio_1_1Svr_1_1Console_1_1Virtio__con"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71decef04824571dd001527b9cff8ccb inherit pub_methods_classL4virtio_1_1Svr_1_1Console_1_1Virtio__con" id="r_a71decef04824571dd001527b9cff8ccb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#a71decef04824571dd001527b9cff8ccb">port_open</a> (unsigned idx, bool open)</td></tr>
<tr class="memdesc:a71decef04824571dd001527b9cff8ccb inherit pub_methods_classL4virtio_1_1Svr_1_1Console_1_1Virtio__con"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a PORT_OPEN message and update the internal state.  <br /></td></tr>
<tr class="separator:a71decef04824571dd001527b9cff8ccb inherit pub_methods_classL4virtio_1_1Svr_1_1Console_1_1Virtio__con"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade546fa843dcfb4a0412757fee9834d7 inherit pub_methods_classL4virtio_1_1Svr_1_1Console_1_1Virtio__con" id="r_ade546fa843dcfb4a0412757fee9834d7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#ade546fa843dcfb4a0412757fee9834d7">send_control_message</a> (<a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a> idx, <a class="el" href="group__l4__basic__types.html#gae8d67914f723bf843df6f311ad2619a2">l4_uint16_t</a> event, <a class="el" href="group__l4__basic__types.html#gae8d67914f723bf843df6f311ad2619a2">l4_uint16_t</a> value=0, const char *name=0)</td></tr>
<tr class="memdesc:ade546fa843dcfb4a0412757fee9834d7 inherit pub_methods_classL4virtio_1_1Svr_1_1Console_1_1Virtio__con"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send control message to driver.  <br /></td></tr>
<tr class="separator:ade546fa843dcfb4a0412757fee9834d7 inherit pub_methods_classL4virtio_1_1Svr_1_1Console_1_1Virtio__con"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3766f6b0a63966a6063ae540bb844a1 inherit pub_methods_classL4virtio_1_1Svr_1_1Console_1_1Virtio__con" id="r_ab3766f6b0a63966a6063ae540bb844a1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#ab3766f6b0a63966a6063ae540bb844a1">handle_control_message</a> ()</td></tr>
<tr class="memdesc:ab3766f6b0a63966a6063ae540bb844a1 inherit pub_methods_classL4virtio_1_1Svr_1_1Console_1_1Virtio__con"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle control message received from the driver.  <br /></td></tr>
<tr class="separator:ab3766f6b0a63966a6063ae540bb844a1 inherit pub_methods_classL4virtio_1_1Svr_1_1Console_1_1Virtio__con"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6af9e7a53e9707319c9b46425e583594 inherit pub_methods_classL4virtio_1_1Svr_1_1Console_1_1Virtio__con" id="r_a6af9e7a53e9707319c9b46425e583594"><td class="memItemLeft" align="right" valign="top">
void&#160;</td><td class="memItemRight" valign="bottom"><b>reset</b> () override</td></tr>
<tr class="memdesc:a6af9e7a53e9707319c9b46425e583594 inherit pub_methods_classL4virtio_1_1Svr_1_1Console_1_1Virtio__con"><td class="mdescLeft">&#160;</td><td class="mdescRight">reset callback, called for doing a device reset <br /></td></tr>
<tr class="separator:a6af9e7a53e9707319c9b46425e583594 inherit pub_methods_classL4virtio_1_1Svr_1_1Console_1_1Virtio__con"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0acfd3f46918e6d382201745a4ffb2d1 inherit pub_methods_classL4virtio_1_1Svr_1_1Console_1_1Virtio__con" id="r_a0acfd3f46918e6d382201745a4ffb2d1"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#a0acfd3f46918e6d382201745a4ffb2d1">reset_device</a> ()</td></tr>
<tr class="memdesc:a0acfd3f46918e6d382201745a4ffb2d1 inherit pub_methods_classL4virtio_1_1Svr_1_1Console_1_1Virtio__con"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset the state of the actual console device.  <br /></td></tr>
<tr class="separator:a0acfd3f46918e6d382201745a4ffb2d1 inherit pub_methods_classL4virtio_1_1Svr_1_1Console_1_1Virtio__con"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classL4virtio_1_1Svr_1_1Device__t')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classL4virtio_1_1Svr_1_1Device__t.html">L4virtio::Svr::Device_t&lt; DATA &gt;</a></td></tr>
<tr class="memitem:a2c191fe0524b519a6262f557ebf9f2be inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t" id="r_a2c191fe0524b519a6262f557ebf9f2be"><td class="memItemLeft" align="right" valign="top">
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>cfg_changed</b> (unsigned)</td></tr>
<tr class="memdesc:a2c191fe0524b519a6262f557ebf9f2be inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">callback for client device configuration changes <br /></td></tr>
<tr class="separator:a2c191fe0524b519a6262f557ebf9f2be inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66d09e200e34ccad61e5843d2b5bb0a0 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t" id="r_a66d09e200e34ccad61e5843d2b5bb0a0"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Device__t.html#a66d09e200e34ccad61e5843d2b5bb0a0">register_driver_irq</a> (unsigned idx)</td></tr>
<tr class="memdesc:a66d09e200e34ccad61e5843d2b5bb0a0 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback for registering an notification IRQ (multi IRQ).  <br /></td></tr>
<tr class="separator:a66d09e200e34ccad61e5843d2b5bb0a0 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae684a9e7816579ca93e4f3bf6c765999 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t" id="r_ae684a9e7816579ca93e4f3bf6c765999"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classL4_1_1Cap.html">L4::Cap</a>&lt; <a class="el" href="classL4_1_1Irq.html">L4::Irq</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Device__t.html#ae684a9e7816579ca93e4f3bf6c765999">device_notify_irq</a> (unsigned idx)</td></tr>
<tr class="memdesc:ae684a9e7816579ca93e4f3bf6c765999 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback to gather the device notification IRQ (multi IRQ).  <br /></td></tr>
<tr class="separator:ae684a9e7816579ca93e4f3bf6c765999 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9536bf0c6e00b566c78c6abe80a68780 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t" id="r_a9536bf0c6e00b566c78c6abe80a68780"><td class="memItemLeft" align="right" valign="top">
virtual unsigned&#160;</td><td class="memItemRight" valign="bottom"><b>num_events_supported</b> () const</td></tr>
<tr class="memdesc:a9536bf0c6e00b566c78c6abe80a68780 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the highest notification index supported. <br /></td></tr>
<tr class="separator:a9536bf0c6e00b566c78c6abe80a68780 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ce755ee0579fb70926d762ba67bb66f inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t" id="r_a7ce755ee0579fb70926d762ba67bb66f"><td class="memItemLeft" align="right" valign="top">
&#160;</td><td class="memItemRight" valign="bottom"><b>Device_t</b> (<a class="el" href="classL4virtio_1_1Svr_1_1Dev__config.html">Dev_config</a> *dev_config)</td></tr>
<tr class="memdesc:a7ce755ee0579fb70926d762ba67bb66f inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make a device for the given config. <br /></td></tr>
<tr class="separator:a7ce755ee0579fb70926d762ba67bb66f inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac35c61db0aec9e96ee18170bf5bb17b4 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t" id="r_ac35c61db0aec9e96ee18170bf5bb17b4"><td class="memItemLeft" align="right" valign="top">
Mem_list const *&#160;</td><td class="memItemRight" valign="bottom"><b>mem_info</b> () const</td></tr>
<tr class="memdesc:ac35c61db0aec9e96ee18170bf5bb17b4 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the memory region list used for this device. <br /></td></tr>
<tr class="separator:ac35c61db0aec9e96ee18170bf5bb17b4 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedbe988112e98750e5409a8c92358dcf inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t" id="r_aedbe988112e98750e5409a8c92358dcf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Device__t.html#aedbe988112e98750e5409a8c92358dcf">reset_queue_config</a> (unsigned idx, unsigned num_max, bool inc_generation=false)</td></tr>
<tr class="memdesc:aedbe988112e98750e5409a8c92358dcf inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Trigger reset for the configuration space for queue <em>idx</em>.  <br /></td></tr>
<tr class="separator:aedbe988112e98750e5409a8c92358dcf inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac13ae09cfc41fad98bd25c2d76bfac63 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t" id="r_ac13ae09cfc41fad98bd25c2d76bfac63"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Device__t.html#ac13ae09cfc41fad98bd25c2d76bfac63">init_mem_info</a> (unsigned num)</td></tr>
<tr class="memdesc:ac13ae09cfc41fad98bd25c2d76bfac63 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the memory region list to the given maximum.  <br /></td></tr>
<tr class="separator:ac13ae09cfc41fad98bd25c2d76bfac63 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29f780ecb04509d8b72f4a155b073c74 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t" id="r_a29f780ecb04509d8b72f4a155b073c74"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Device__t.html#a29f780ecb04509d8b72f4a155b073c74">device_error</a> ()</td></tr>
<tr class="memdesc:a29f780ecb04509d8b72f4a155b073c74 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transition device into DEVICE_NEEDS_RESET state.  <br /></td></tr>
<tr class="separator:a29f780ecb04509d8b72f4a155b073c74 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab906b4cc61026fd815a8056f07bef10e inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t" id="r_ab906b4cc61026fd815a8056f07bef10e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Device__t.html#ab906b4cc61026fd815a8056f07bef10e">setup_queue</a> (<a class="el" href="classL4virtio_1_1Svr_1_1Virtqueue.html">Virtqueue</a> *q, unsigned qn, unsigned num_max)</td></tr>
<tr class="memdesc:ab906b4cc61026fd815a8056f07bef10e inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable/disable the specified queue.  <br /></td></tr>
<tr class="separator:ab906b4cc61026fd815a8056f07bef10e inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a460f5dc2b32e33a616eb822ffd2f88f0 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t" id="r_a460f5dc2b32e33a616eb822ffd2f88f0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Device__t.html#a460f5dc2b32e33a616eb822ffd2f88f0">handle_mem_cmd_write</a> ()</td></tr>
<tr class="memdesc:a460f5dc2b32e33a616eb822ffd2f88f0 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check for a value in the <code>cmd</code> register and handle a write.  <br /></td></tr>
<tr class="separator:a460f5dc2b32e33a616eb822ffd2f88f0 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade1572aa45b90682de1e05f08590d7e3 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t" id="r_ade1572aa45b90682de1e05f08590d7e3"><td class="memItemLeft" align="right" valign="top">
void&#160;</td><td class="memItemRight" valign="bottom"><b>enable_trusted_ds_validation</b> ()</td></tr>
<tr class="memdesc:ade1572aa45b90682de1e05f08590d7e3 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable trusted dataspace validation. <br /></td></tr>
<tr class="separator:ade1572aa45b90682de1e05f08590d7e3 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38406c5353e2f96de8c667a6d5c5f5f1 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t" id="r_a38406c5353e2f96de8c667a6d5c5f5f1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Device__t.html#a38406c5353e2f96de8c667a6d5c5f5f1">add_trusted_dataspaces</a> (std::shared_ptr&lt; Ds_vector const &gt; ds)</td></tr>
<tr class="memdesc:a38406c5353e2f96de8c667a6d5c5f5f1 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Provide a list of trusted dataspaces that can be used for validation.  <br /></td></tr>
<tr class="separator:a38406c5353e2f96de8c667a6d5c5f5f1 inherit pub_methods_classL4virtio_1_1Svr_1_1Device__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a5f8d5752548def0f7db1cbade7918d6a" id="r_a5f8d5752548def0f7db1cbade7918d6a"><td class="memItemLeft" align="right" valign="top"><a id="a5f8d5752548def0f7db1cbade7918d6a" name="a5f8d5752548def0f7db1cbade7918d6a"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>resend_stalled_control_messages</b> ()</td></tr>
<tr class="memdesc:a5f8d5752548def0f7db1cbade7918d6a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try to resend a stalled control message and update the port and global state accordingly. <br /></td></tr>
<tr class="separator:a5f8d5752548def0f7db1cbade7918d6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d7102514d25d0a1e706ef902760b18c" id="r_a3d7102514d25d0a1e706ef902760b18c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structL4virtio_1_1Svr_1_1Console_1_1Port.html">Port</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Device.html#a3d7102514d25d0a1e706ef902760b18c">port</a> (unsigned idx) override</td></tr>
<tr class="memdesc:a3d7102514d25d0a1e706ef902760b18c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the specified port.  <br /></td></tr>
<tr class="separator:a3d7102514d25d0a1e706ef902760b18c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="inherited" name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_attribs_classL4virtio_1_1Svr_1_1Device__t"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classL4virtio_1_1Svr_1_1Device__t')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classL4virtio_1_1Svr_1_1Device__t.html">L4virtio::Svr::Device_t&lt; DATA &gt;</a></td></tr>
<tr class="memitem:a4ff8b5e4425d1b720b9751fbe501f68d inherit pro_attribs_classL4virtio_1_1Svr_1_1Device__t" id="r_a4ff8b5e4425d1b720b9751fbe501f68d"><td class="memItemLeft" align="right" valign="top">
Mem_list&#160;</td><td class="memItemRight" valign="bottom"><b>_mem_info</b></td></tr>
<tr class="memdesc:a4ff8b5e4425d1b720b9751fbe501f68d inherit pro_attribs_classL4virtio_1_1Svr_1_1Device__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Memory region list. <br /></td></tr>
<tr class="separator:a4ff8b5e4425d1b720b9751fbe501f68d inherit pro_attribs_classL4virtio_1_1Svr_1_1Device__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Base class implementing a virtio console device with L4Re-based notification handling. </p>
<p>This console device is derived from <a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html" title="Base class implementing a virtio console functionality.">Virtio_con</a> and already includes functionality to handle interrupts and notify drivers. If an interrupt is received, all the necessary interaction with the virtqueues is performed and only the actual data processing has to be done by the derived class. By default all available ports are added and an "open"-request of a port by the driver is automatically acknowledged. The derived class can optionally change this behaviour by overriding <code><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Device.html#a7a27d977561bcd659d54644f91b3a307" title="Callback called on DEVICE_READY event.">process_device_ready()</a></code>, <code><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Device.html#a7dde9e63b6fb498c87b6c1ed9e60198f" title="Callback called on PORT_READY event.">process_port_ready()</a></code> and <code><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Device.html#a718fd3f1885b00a1ac6f0d9d33e4b9f4" title="Callback called on PORT_OPEN event.">process_port_open()</a></code>.</p>
<p>This class provides a stream-based interface to access the port data with edge-triggered notification callbacks. If a port receives data from the driver the derived class is notified with the <code><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Device.html#ac02eaed9949cce2ed28416a5c0e99711" title="Callback to notify that new data is available to be read from port.">rx_data_available()</a></code> callback. The actual data can be retrieved by <code><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Device.html#acf4b1bbf927d4d40b2532a7a18bf21bd" title="Read data from port.">port_read()</a></code>. If there was not enough data to be read, the call will return the available partial data. Only then will the <code><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Device.html#ac02eaed9949cce2ed28416a5c0e99711" title="Callback to notify that new data is available to be read from port.">rx_data_available()</a></code> callback be triggered again.</p>
<p>Data on a port may be transmitted by <code><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Device.html#a5b906c9cec86e9cf30dff4fe1edf1b11" title="Write data to port.">port_write()</a></code>. If there were not enough buffers available, only a part of the data will be transmitted. Once there are new buffers available, the <code><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Device.html#a2eb163dbbe274b4aef9a8dc678208b64" title="Callback to notify that data can be written to port.">tx_space_available()</a></code> callback will be invoked. This callback will be called again only after a previous <code><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Device.html#a5b906c9cec86e9cf30dff4fe1edf1b11" title="Write data to port.">port_write()</a></code> was not able to send all requested data.</p>
<p>Use this class as a base to provide your own high-level console device. You must derive from this class as well as L4::Epiface_t&lt;..., L4virtio::Device&gt;. For a working device the irq_iface() must be registered too. A typical implementation might look like the following:</p>
<div class="fragment"><div class="line"><span class="keyword">class </span>My_console</div>
<div class="line">: <span class="keyword">public</span> <a class="code hl_class" href="classL4virtio_1_1Svr_1_1Console_1_1Device.html">L4virtio::Svr::Console::Device</a>,</div>
<div class="line">  <span class="keyword">public</span> <a class="code hl_struct" href="structL4_1_1Epiface__t.html">L4::Epiface_t</a>&lt;My_console, L4virtio::Device&gt;</div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">  My_console(<a class="code hl_class" href="classL4Re_1_1Util_1_1Object__registry.html">L4Re::Util::Object_registry</a> *r)</div>
<div class="line">  : <a class="code hl_namespace" href="namespaceL4virtio.html">L4virtio</a>::Svr::Console::<a class="code hl_class" href="classL4virtio_1_1Svr_1_1Console_1_1Device.html">Device</a>(0x100)</div>
<div class="line">  {</div>
<div class="line">    init_mem_info(4);</div>
<div class="line">    <a class="code hl_function" href="namespaceL4Re.html#a64b057254a760643ba67a9ed452fede8">L4Re::chkcap</a>(r-&gt;<a class="code hl_function" href="classL4Re_1_1Util_1_1Object__registry.html#a17efa2d2a6364b35054f354daa27518e">register_irq_obj</a>(irq_iface()), <span class="stringliteral">&quot;virtio notification IRQ&quot;</span>);</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> rx_data_available(<span class="keywordtype">unsigned</span> port)<span class="keyword"> override</span></div>
<div class="line"><span class="keyword">  </span>{</div>
<div class="line">    <span class="comment">// call port_read() to fetch available data</span></div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">void</span> tx_space_available(<span class="keywordtype">unsigned</span> port)<span class="keyword"> override</span></div>
<div class="line"><span class="keyword">  </span>{</div>
<div class="line">    <span class="comment">// can call port_write() to send (pending) data</span></div>
<div class="line">  }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">My_console console(registry);</div>
<div class="line">registry-&gt;register_obj(&amp;console, ...);</div>
<div class="ttc" id="aclassL4Re_1_1Util_1_1Object__registry_html"><div class="ttname"><a href="classL4Re_1_1Util_1_1Object__registry.html">L4Re::Util::Object_registry</a></div><div class="ttdoc">A registry that manages server objects and their attached IPC gates for a single server loop for a sp...</div><div class="ttdef"><b>Definition</b> <a href="object__registry_source.html#l00052">object_registry:55</a></div></div>
<div class="ttc" id="aclassL4Re_1_1Util_1_1Object__registry_html_a17efa2d2a6364b35054f354daa27518e"><div class="ttname"><a href="classL4Re_1_1Util_1_1Object__registry.html#a17efa2d2a6364b35054f354daa27518e">L4Re::Util::Object_registry::register_irq_obj</a></div><div class="ttdeci">L4::Cap&lt; L4::Irq &gt; register_irq_obj(L4::Epiface *o) override</div><div class="ttdoc">Register a handler for an interrupt.</div><div class="ttdef"><b>Definition</b> <a href="object__registry_source.html#l00238">object_registry:238</a></div></div>
<div class="ttc" id="aclassL4virtio_1_1Svr_1_1Console_1_1Device_html"><div class="ttname"><a href="classL4virtio_1_1Svr_1_1Console_1_1Device.html">L4virtio::Svr::Console::Device</a></div><div class="ttdoc">Base class implementing a virtio console device with L4Re-based notification handling.</div><div class="ttdef"><b>Definition</b> <a href="virtio-console-device_source.html#l00116">virtio-console-device:118</a></div></div>
<div class="ttc" id="anamespaceL4Re_html_a64b057254a760643ba67a9ed452fede8"><div class="ttname"><a href="namespaceL4Re.html#a64b057254a760643ba67a9ed452fede8">L4Re::chkcap</a></div><div class="ttdeci">T chkcap(T &amp;&amp;cap, char const *extra=&quot;&quot;, long err=-L4_ENOMEM)</div><div class="ttdoc">Check for valid capability or raise C++ exception.</div><div class="ttdef"><b>Definition</b> <a href="error__helper_source.html#l00145">error_helper:145</a></div></div>
<div class="ttc" id="anamespaceL4virtio_html"><div class="ttname"><a href="namespaceL4virtio.html">L4virtio</a></div><div class="ttdoc">L4-VIRTIO Transport C++ API.</div><div class="ttdef"><b>Definition</b> <a href="client_2l4virtio_source.html#l00026">l4virtio:26</a></div></div>
<div class="ttc" id="astructL4_1_1Epiface__t_html"><div class="ttname"><a href="structL4_1_1Epiface__t.html">L4::Epiface_t</a></div><div class="ttdoc">Epiface implementation for Kobject-based interface implementations.</div><div class="ttdef"><b>Definition</b> <a href="ipc__epiface_source.html#l00514">ipc_epiface:515</a></div></div>
</div><!-- fragment --><p>The maximum number of memory regions (<a class="el" href="classL4virtio_1_1Svr_1_1Device__t.html#ac13ae09cfc41fad98bd25c2d76bfac63" title="Initialize the memory region list to the given maximum.">init_mem_info()</a>) should correlate with the number of supported ports. </p>

<p class="definition">Definition at line <a class="el" href="virtio-console-device_source.html#l00116">116</a> of file <a class="el" href="virtio-console-device_source.html">virtio-console-device</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ab5ed1b50212197887ca23efd1ac6f393" name="ab5ed1b50212197887ca23efd1ac6f393"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5ed1b50212197887ca23efd1ac6f393">&#9670;&#160;</a></span>Device() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">L4virtio::Svr::Console::Device::Device </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>vq_max</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a new console device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">vq_max</td><td>Maximum number of buffers in data queues.</td></tr>
  </table>
  </dd>
</dl>
<p>Create a console device with no multiport support, i.e. control queues are disabled. </p>

<p class="definition">Definition at line <a class="el" href="virtio-console-device_source.html#l00143">143</a> of file <a class="el" href="virtio-console-device_source.html">virtio-console-device</a>.</p>

</div>
</div>
<a id="a0c5a3f713007f64cc2ed052622b6741b" name="a0c5a3f713007f64cc2ed052622b6741b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c5a3f713007f64cc2ed052622b6741b">&#9670;&#160;</a></span>Device() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">L4virtio::Svr::Console::Device::Device </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>vq_max</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>ports</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a new console device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">vq_max</td><td>Maximum number of buffers in data queues. </td></tr>
    <tr><td class="paramname">ports</td><td>Number of ports (maximum 32).</td></tr>
  </table>
  </dd>
</dl>
<p>Create a console device with multiport support, i.e. control queues are enabled. </p>

<p class="definition">Definition at line <a class="el" href="virtio-console-device_source.html#l00162">162</a> of file <a class="el" href="virtio-console-device_source.html">virtio-console-device</a>.</p>

<p class="reference">References <a class="el" href="error__helper_source.html#l00068">L4Re::chksys()</a>, and <a class="el" href="err_8h_source.html#l00050">L4_ENOMEM</a>.</p>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Svr_1_1Console_1_1Device_a0c5a3f713007f64cc2ed052622b6741b_cgraph.svg" width="511" height="51"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="acf10e85eddb60b7f4c5e5a8d21e63919" name="acf10e85eddb60b7f4c5e5a8d21e63919"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf10e85eddb60b7f4c5e5a8d21e63919">&#9670;&#160;</a></span>Device() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">L4virtio::Svr::Console::Device::Device </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcxx_1_1static__vector.html">cxx::static_vector</a>&lt; unsigned &gt; const &amp;&#160;</td>
          <td class="paramname"><em>vq_max_nums</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a new console <a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Device.html" title="Base class implementing a virtio console device with L4Re-based notification handling.">Device</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">vq_max_nums</td><td>Maximum number of buffers in data queues, given as a <a class="el" href="classcxx_1_1static__vector.html" title="Simple encapsulation for a dynamically allocated array.">cxx::static_vector</a> with one entry per port.</td></tr>
  </table>
  </dd>
</dl>
<p>Create a console device with multiport support, i.e. control queues are enabled. </p>

<p class="definition">Definition at line <a class="el" href="virtio-console-device_source.html#l00184">184</a> of file <a class="el" href="virtio-console-device_source.html">virtio-console-device</a>.</p>

<p class="reference">References <a class="el" href="error__helper_source.html#l00068">L4Re::chksys()</a>, and <a class="el" href="err_8h_source.html#l00050">L4_ENOMEM</a>.</p>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Svr_1_1Console_1_1Device_acf10e85eddb60b7f4c5e5a8d21e63919_cgraph.svg" width="511" height="51"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a7df13c65e5b01e4bd8140a1c9b6b3858" name="a7df13c65e5b01e4bd8140a1c9b6b3858"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7df13c65e5b01e4bd8140a1c9b6b3858">&#9670;&#160;</a></span>do_control_work()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int L4virtio::Svr::Console::Device::do_control_work </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Receive new control messages and resend stalled ones. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">see</td><td><code><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#ab3766f6b0a63966a6063ae540bb844a1" title="Handle control message received from the driver.">handle_control_message()</a></code></td></tr>
  </table>
  </dd>
</dl>
<p>As it may happen that the driver is not able to receive a control message, there may be some stalled control message. This function checks if such messages exist and tries to resend them once more. Afterwards it checks for new messages from the driver, see <code><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#ab3766f6b0a63966a6063ae540bb844a1" title="Handle control message received from the driver.">handle_control_message()</a></code>. </p>

<p class="definition">Definition at line <a class="el" href="virtio-console-device_source.html#l00400">400</a> of file <a class="el" href="virtio-console-device_source.html">virtio-console-device</a>.</p>

<p class="reference">References <a class="el" href="virtio-console_source.html#l00443">L4virtio::Svr::Console::Virtio_con::handle_control_message()</a>, and <a class="el" href="virtio-console-device_source.html#l00478">resend_stalled_control_messages()</a>.</p>
<div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Svr_1_1Console_1_1Device_a7df13c65e5b01e4bd8140a1c9b6b3858_cgraph.svg" width="1363" height="712"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a04be7d77cf99a295ec0e4f32693858ed" name="a04be7d77cf99a295ec0e4f32693858ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04be7d77cf99a295ec0e4f32693858ed">&#9670;&#160;</a></span>notify_queue()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void L4virtio::Svr::Console::Device::notify_queue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classL4virtio_1_1Svr_1_1Virtqueue.html">Virtqueue</a> *&#160;</td>
          <td class="paramname"><em>queue</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Notify queue of available data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">queue</td><td><a class="el" href="classL4virtio_1_1Svr_1_1Virtqueue.html" title="Virtqueue implementation for the device.">Virtqueue</a> to notify.</td></tr>
  </table>
  </dd>
</dl>
<p>This callback is called whenever data is sent to <code>queue</code>. It is the responsibility of the derived class to perform all necessary notification actions, e.g. triggering guest interrupts. </p>

<p>Implements <a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#a6947ed06c4dc7dc219e41824f21f9a19">L4virtio::Svr::Console::Virtio_con</a>.</p>

<p class="definition">Definition at line <a class="el" href="virtio-console-device_source.html#l00208">208</a> of file <a class="el" href="virtio-console-device_source.html">virtio-console-device</a>.</p>

<p class="reference">References <a class="el" href="virtio_8h_source.html#l00109">L4VIRTIO_IRQ_STATUS_VRING</a>, and <a class="el" href="virtqueue_source.html#l00420">L4virtio::Virtqueue::no_notify_guest()</a>.</p>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Svr_1_1Console_1_1Device_a04be7d77cf99a295ec0e4f32693858ed_cgraph.svg" width="570" height="51"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a3d7102514d25d0a1e706ef902760b18c" name="a3d7102514d25d0a1e706ef902760b18c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d7102514d25d0a1e706ef902760b18c">&#9670;&#160;</a></span>port()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structL4virtio_1_1Svr_1_1Console_1_1Port.html">Port</a> * L4virtio::Svr::Console::Device::port </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>port</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the specified port. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td><a class="el" href="structL4virtio_1_1Svr_1_1Console_1_1Port.html" title="Representation of a Virtio console port.">Port</a> number.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd><a class="el" href="structL4virtio_1_1Svr_1_1Console_1_1Port.html" title="Representation of a Virtio console port.">Port</a> number must be lower than the configured maximum number of ports. </dd></dl>

<p>Implements <a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#aabb98e78ce5301c2a15e116871046cfd">L4virtio::Svr::Console::Virtio_con</a>.</p>

<p class="definition">Definition at line <a class="el" href="virtio-console-device_source.html#l00505">505</a> of file <a class="el" href="virtio-console-device_source.html">virtio-console-device</a>.</p>

<p class="reference">Referenced by <a class="el" href="virtio-console-device_source.html#l00278">port_read()</a>, <a class="el" href="virtio-console-device_source.html#l00345">port_write()</a>, and <a class="el" href="virtio-console-device_source.html#l00448">process_port_ready()</a>.</p>
<div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Svr_1_1Console_1_1Device_a3d7102514d25d0a1e706ef902760b18c_icgraph.svg" width="430" height="179"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="acf4b1bbf927d4d40b2532a7a18bf21bd" name="acf4b1bbf927d4d40b2532a7a18bf21bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf4b1bbf927d4d40b2532a7a18bf21bd">&#9670;&#160;</a></span>port_read()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned L4virtio::Svr::Console::Device::port_read </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>port</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read data from port. </p>
<p>Will read up to <em>len</em> bytes from <em>port</em> into <em>buf</em>. Returns the number of bytes read, which may be less if not enough data was available. If all data was read, the <a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Device.html#ac02eaed9949cce2ed28416a5c0e99711" title="Callback to notify that new data is available to be read from port.">rx_data_available()</a> callback will be invoked the next time the driver queues new data for the port. The callback won't be called again until all data was consumed again.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td>The destination buffer </td></tr>
    <tr><td class="paramname">len</td><td>Size of the buffer </td></tr>
    <tr><td class="paramname">port</td><td><a class="el" href="structL4virtio_1_1Svr_1_1Console_1_1Port.html" title="Representation of a Virtio console port.">Port</a> index to read data from </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of bytes read </dd></dl>

<p class="definition">Definition at line <a class="el" href="virtio-console-device_source.html#l00278">278</a> of file <a class="el" href="virtio-console-device_source.html">virtio-console-device</a>.</p>

<p class="reference">References <a class="el" href="virtio_source.html#l00221">L4virtio::Svr::Virtqueue::finish()</a>, <a class="el" href="virtio_source.html#l00290">L4virtio::Svr::Data_buffer::left</a>, <a class="el" href="server_2l4virtio_source.html#l00892">L4virtio::Svr::Device_t&lt; DATA &gt;::mem_info()</a>, <a class="el" href="virtio_source.html#l00551">L4virtio::Svr::Request_processor::next()</a>, <a class="el" href="virtio_source.html#l00138">L4virtio::Svr::Virtqueue::next_avail()</a>, <a class="el" href="virtio-console-device_source.html#l00505">port()</a>, <a class="el" href="virtio_source.html#l00289">L4virtio::Svr::Data_buffer::pos</a>, <a class="el" href="virtio-console-device_source.html#l00041">L4virtio::Svr::Console::Device_port::request</a>, <a class="el" href="virtio-console-device_source.html#l00040">L4virtio::Svr::Console::Device_port::rp</a>, <a class="el" href="virtio-console-device_source.html#l00042">L4virtio::Svr::Console::Device_port::src</a>, <a class="el" href="virtio_source.html#l00482">L4virtio::Svr::Request_processor::start()</a>, <a class="el" href="virtio-console_source.html#l00129">L4virtio::Svr::Console::Port::tx</a>, and <a class="el" href="virtio-console_source.html#l00159">L4virtio::Svr::Console::Port::tx_ready()</a>.</p>
<div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Svr_1_1Console_1_1Device_acf4b1bbf927d4d40b2532a7a18bf21bd_cgraph.svg" width="616" height="536"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a5b906c9cec86e9cf30dff4fe1edf1b11" name="a5b906c9cec86e9cf30dff4fe1edf1b11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b906c9cec86e9cf30dff4fe1edf1b11">&#9670;&#160;</a></span>port_write()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned L4virtio::Svr::Console::Device::port_write </td>
          <td>(</td>
          <td class="paramtype">char const *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>port</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Write data to port. </p>
<p>Will write up to <em>len</em> bytes to <em>port</em> from <em>buf</em>. Returns the number of bytes written, which may be less if not enough virtio buffers were available. If not all data could be written, the <a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Device.html#a2eb163dbbe274b4aef9a8dc678208b64" title="Callback to notify that data can be written to port.">tx_space_available()</a> callback will be invoked the next time the driver queues new receive buffers for the port. The callback won't be called again until all receive buffers were filled again.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td>The souce buffer </td></tr>
    <tr><td class="paramname">len</td><td>Size of the buffer </td></tr>
    <tr><td class="paramname">port</td><td><a class="el" href="structL4virtio_1_1Svr_1_1Console_1_1Port.html" title="Representation of a Virtio console port.">Port</a> index to write data to </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of bytes written </dd></dl>

<p class="definition">Definition at line <a class="el" href="virtio-console-device_source.html#l00345">345</a> of file <a class="el" href="virtio-console-device_source.html">virtio-console-device</a>.</p>

<p class="reference">References <a class="el" href="virtio_source.html#l00335">L4virtio::Svr::Data_buffer::copy_to()</a>, <a class="el" href="virtio_source.html#l00221">L4virtio::Svr::Virtqueue::finish()</a>, <a class="el" href="virtio_source.html#l00290">L4virtio::Svr::Data_buffer::left</a>, <a class="el" href="server_2l4virtio_source.html#l00892">L4virtio::Svr::Device_t&lt; DATA &gt;::mem_info()</a>, <a class="el" href="virtio_source.html#l00551">L4virtio::Svr::Request_processor::next()</a>, <a class="el" href="virtio_source.html#l00138">L4virtio::Svr::Virtqueue::next_avail()</a>, <a class="el" href="virtio-console-device_source.html#l00505">port()</a>, <a class="el" href="virtio_source.html#l00289">L4virtio::Svr::Data_buffer::pos</a>, <a class="el" href="virtio-console_source.html#l00130">L4virtio::Svr::Console::Port::rx</a>, <a class="el" href="virtio-console_source.html#l00155">L4virtio::Svr::Console::Port::rx_ready()</a>, and <a class="el" href="virtio_source.html#l00482">L4virtio::Svr::Request_processor::start()</a>.</p>
<div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Svr_1_1Console_1_1Device_a5b906c9cec86e9cf30dff4fe1edf1b11_cgraph.svg" width="616" height="582"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a7a27d977561bcd659d54644f91b3a307" name="a7a27d977561bcd659d54644f91b3a307"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a27d977561bcd659d54644f91b3a307">&#9670;&#160;</a></span>process_device_ready()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void L4virtio::Svr::Console::Device::process_device_ready </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#gae8d67914f723bf843df6f311ad2619a2">l4_uint16_t</a>&#160;</td>
          <td class="paramname"><em>value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Callback called on DEVICE_READY event. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">value</td><td>The value field of the control message, indicating if the initialization was successful.</td></tr>
  </table>
  </dd>
</dl>
<p>By default, this function adds all ports if the driver indicates successful initialization. Override this function to perform custom actions for a DEVICE_READY event, <em>after</em> the generic management of the base class. It is then your responsibility to inform the driver about usable ports, see <code><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#a88e370a9d1c9e029a8de04f68e380457" title="Send a DEVICE_ADD message and update the internal state.">port_add()</a></code>. </p>

<p>Implements <a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#a881b5ba4878d2d4393bc87112a88aa68">L4virtio::Svr::Console::Virtio_con</a>.</p>

<p class="definition">Definition at line <a class="el" href="virtio-console-device_source.html#l00426">426</a> of file <a class="el" href="virtio-console-device_source.html">virtio-console-device</a>.</p>

<p class="reference">References <a class="el" href="virtio-console_source.html#l00298">L4virtio::Svr::Console::Virtio_con::port_add()</a>.</p>
<div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Svr_1_1Console_1_1Device_a7a27d977561bcd659d54644f91b3a307_cgraph.svg" width="1126" height="358"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a718fd3f1885b00a1ac6f0d9d33e4b9f4" name="a718fd3f1885b00a1ac6f0d9d33e4b9f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a718fd3f1885b00a1ac6f0d9d33e4b9f4">&#9670;&#160;</a></span>process_port_open()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void L4virtio::Svr::Console::Device::process_port_open </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a>&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#gae8d67914f723bf843df6f311ad2619a2">l4_uint16_t</a>&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Callback called on PORT_OPEN event. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>The id field of the control message, i.e. the port number. </td></tr>
    <tr><td class="paramname">value</td><td>The value field of the control message, indicating if the port was opened or closed.</td></tr>
  </table>
  </dd>
</dl>
<p>By default, this function acknowledges the message from the driver by sending back the same message. Override this function to perform custom actions for a PORT_OPEN event, <em>after</em> the generic management of the base class. It is then your responsibility to update the internal port state and answer the driver's messages, see <code><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#a71decef04824571dd001527b9cff8ccb" title="Send a PORT_OPEN message and update the internal state.">port_open()</a></code>. </p>

<p>Implements <a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#a0484023e58f9540275d31a9aac94dd22">L4virtio::Svr::Console::Virtio_con</a>.</p>

<p class="definition">Definition at line <a class="el" href="virtio-console-device_source.html#l00470">470</a> of file <a class="el" href="virtio-console-device_source.html">virtio-console-device</a>.</p>

<p class="reference">References <a class="el" href="virtio-console_source.html#l00355">L4virtio::Svr::Console::Virtio_con::port_open()</a>.</p>
<div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Svr_1_1Console_1_1Device_a718fd3f1885b00a1ac6f0d9d33e4b9f4_cgraph.svg" width="1112" height="358"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a7dde9e63b6fb498c87b6c1ed9e60198f" name="a7dde9e63b6fb498c87b6c1ed9e60198f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7dde9e63b6fb498c87b6c1ed9e60198f">&#9670;&#160;</a></span>process_port_ready()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void L4virtio::Svr::Console::Device::process_port_ready </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a>&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#gae8d67914f723bf843df6f311ad2619a2">l4_uint16_t</a>&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Callback called on PORT_READY event. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>The id field of the control message, i.e. the port number. </td></tr>
    <tr><td class="paramname">value</td><td>The value field of the control message, indicating if the initialization was successful.</td></tr>
  </table>
  </dd>
</dl>
<p>By default, this function removes the port, if the driver failed to set it up correctly. Override this function to perform custom actions for a PORT_READY event, <em>after</em> the generic management of the base class. It is then your responsibility to inform the driver about unusable ports, see <code><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#a8335db1f605263cb6ccf2109b8993944" title="Send a DEVICE_REMOVE message and update the internal state.">port_remove()</a></code>. </p>

<p>Reimplemented from <a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Virtio__con.html#a756ca0c5c7dfb856c3a53c7d8e8bcbbf">L4virtio::Svr::Console::Virtio_con</a>.</p>

<p class="definition">Definition at line <a class="el" href="virtio-console-device_source.html#l00448">448</a> of file <a class="el" href="virtio-console-device_source.html">virtio-console-device</a>.</p>

<p class="reference">References <a class="el" href="virtio-console-device_source.html#l00505">port()</a>, <a class="el" href="virtio-console_source.html#l00123">L4virtio::Svr::Console::Port::Port_failed</a>, <a class="el" href="virtio-console_source.html#l00325">L4virtio::Svr::Console::Virtio_con::port_remove()</a>, <a class="el" href="virtio-console_source.html#l00606">L4virtio::Svr::Console::Virtio_con::process_port_ready()</a>, and <a class="el" href="virtio-console_source.html#l00131">L4virtio::Svr::Console::Port::status</a>.</p>
<div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Svr_1_1Console_1_1Device_a7dde9e63b6fb498c87b6c1ed9e60198f_cgraph.svg" width="1136" height="475"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>l4/l4virtio/server/<a class="el" href="virtio-console-device_source.html">virtio-console-device</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceL4virtio.html">L4virtio</a></li><li class="navelem"><b>Svr</b></li><li class="navelem"><b>Console</b></li><li class="navelem"><a class="el" href="classL4virtio_1_1Svr_1_1Console_1_1Device.html">Device</a></li>
    <li class="footer">Generated on Sat Aug 24 2024 15:54:33 for L4Re Operating System Framework by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
